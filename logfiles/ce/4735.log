
2012-03-19 13:44:11 (main):: Task Instance: {4735} PID: {31927}

2012-03-19 13:44:11 (process_task):: Task Name Chef Client (via userdata) - Version 1.000 (DEBUG LEVEL: 4), Ecosystem id: 

2012-03-19 13:44:11 (get_steps):: select step_id, upper(codeblock_name), step_order, function_name
			, function_xml
			, output_parse_type, output_row_delimiter, output_column_delimiter
			, variable_xml
		from task_step 
		where task_id = '9d48cc1f-1e5e-4fb4-89c0-ce91d4e9dd60'
			and commented = 0
		order by codeblock_name, step_order asc

2012-03-19 13:44:11 (get_steps):: DEBUG: 069ef272-71dd-11e1-8593-6ac3918d0fa3 MAIN 1 set_variable {<function command_type="set_variable"><variable><name input_type="text">userdata</name><value input_type="text">#!/bin/sh
set -e -x

echo "deb http://apt.opscode.com/ `lsb_release -cs`-0.10 main" | sudo tee /etc/apt/sources.list.d/opscode.list

sudo mkdir -p /etc/apt/trusted.gpg.d
gpg --keyserver keys.gnupg.net --recv-keys 83EF826A
gpg --export packages@opscode.com | sudo tee /etc/apt/trusted.gpg.d/opscode-keyring.gpg &gt; /dev/null

sudo apt-get --yes --quiet update

sudo apt-get install opscode-keyring

#this line passes some config so the apt-get chef install doesn't prompt for values
echo "chef chef/chef_server_url string none" | sudo debconf-set-selections &amp;&amp; sudo apt-get install chef -y

sudo apt-get --yes --quiet install git


cd /var
sudo git clone git://github.com/opscode/chef-repo.git

sudo knife cookbook site install wordpress --cookbook-path /var/chef-repo/cookbooks

echo -e "file_cache_path \"/var/chef-repo\"\ncookbook_path \"/var/chef-repo/cookbooks\"" | sudo tee /etc/chef/solo.rb

echo '{
    "wordpress": {
        "db": {
            "database": "mywpdb",
            "host": "localhost",
            "user": "mywp",
            "password": "mywp"
        }
    },
    "run_list": ["recipe[wordpress]"]
}' | tee ~/node.json

touch ~/complete
</value><modifier input_type="select">DEFAULT</modifier></variable></function>} 0 0 0 {}

2012-03-19 13:44:11 (get_steps):: DEBUG: 069ef204-71dd-11e1-8593-6ac3918d0fa3 MAIN 2 aws_ec2_RunInstances {<function command_type="aws_ec2_RunInstances"><aws_region input_type="dropdown" label="AWS Region" hr_after="true" style="combo" datasource="function" dataset="ddDataSource_GetAWSClouds" /><ImageId input_type="text">ami-1aad5273</ImageId><MinCount input_type="text">1</MinCount><MaxCount input_type="text">1</MaxCount><KeyName input_type="text">csk_www</KeyName><SecurityGroupId.n is_array="true"><SecurityGroupId input_type="text" /></SecurityGroupId.n><SecurityGroup.n is_array="true"><SecurityGroup input_type="text">csk_cato_dev</SecurityGroup></SecurityGroup.n><UserData input_type="text">[[user_data]]</UserData><AddressingType input_type="text" /><InstanceType input_type="text">t1.micro</InstanceType><Placement><AvailabilityZone input_type="text" /><GroupName input_type="text" /><Tenancy input_type="text" /></Placement><KernelId input_type="text" /><RamdiskId input_type="text" /><BlockDeviceMapping.n is_array="true"><BlockDeviceMapping><DeviceName input_type="text" /><NoDevice input_type="text" /><VirtualName input_type="text" /><Ebs><SnapshotId input_type="text" /><VolumeSize input_type="text" /><DeleteOnTermination input_type="text" /></Ebs></BlockDeviceMapping></BlockDeviceMapping.n><Monitoring><Enabled input_type="text" /></Monitoring><SubnetId input_type="text" /><DisableApiTermination input_type="text" /><InstanceInitiatedShutdownBehavior input_type="text" /><PrivateIpAddress input_type="text" /><ClientToken input_type="text" /><instance_role input_type="text" label="Server Role" /><result_name input_type="text">result</result_name></function>} 0 0 0 {}

2012-03-19 13:44:11 (get_steps):: DEBUG: 069ef024-71dd-11e1-8593-6ac3918d0fa3 MAIN 3 new_connection {<function command_type="new_connection"><conn_type input_type="select">ssh - ec2</conn_type><cloud_name input_type="dropdown" style="combo"></cloud_name><asset input_type="text">ubuntu@[[result.//instanceId]]</asset><conn_name input_type="text">CONN1</conn_name></function>} 0 0 0 {}

2012-03-19 13:44:11 (get_steps):: DEBUG: 069eef48-71dd-11e1-8593-6ac3918d0fa3 MAIN 4 aws_ec2_CreateTags {<function command_type="aws_ec2_CreateTags"><aws_region input_type="dropdown" label="AWS Region" hr_after="true" style="combo" datasource="function" dataset="ddDataSource_GetAWSClouds" /><ResourceId.n is_array="true"><ResourceId input_type="text">[[result.//instanceId]]</ResourceId></ResourceId.n><Tag.n is_array="true"><Tag><Key input_type="text">Name</Key><Value input_type="text">chef wp test</Value></Tag></Tag.n><result_name label="Result Variable" input_type="text" /></function>} 0 0 0 {}

2012-03-19 13:44:11 (get_steps):: DEBUG: 069eeeda-71dd-11e1-8593-6ac3918d0fa3 MAIN 5 cmd_line {<function command_type="cmd_line" parse_method="2"><conn_name input_type="text">CONN1</conn_name><command input_type="text">if [[ -a complete ]]; then sudo chef-solo -j ~/node.json; fi</command><timeout input_type="text">300</timeout><positive_response input_type="text" /><negative_response input_type="text" /></function>} 2 0 0 {}

2012-03-19 13:44:11 (retrieve_params):: Task parameters ><parameters>
</parameters><.

2012-03-19 13:44:11 (retrieve_params):: Task parameters ><parameters></parameters><.

2012-03-19 13:44:11 (run_commands):: ##### Processing Codeblock {MAIN}

2012-03-19 13:44:11 (process_step):: **************************************************************

2012-03-19 13:44:11 (process_step):: **** PROCESSING STEP 069ef272-71dd-11e1-8593-6ac3918d0fa3

2012-03-19 13:44:11 (process_step):: **************************************************************

2012-03-19 13:44:11 (process_step):: Command is {set_variable}

2012-03-19 13:44:11 (process_step):: userdata, #!/bin/sh
set -e -x

echo "deb http://apt.opscode.com/ `lsb_release -cs`-0.10 main" | sudo tee /etc/apt/sources.list.d/opscode.list

sudo mkdir -p /etc/apt/trusted.gpg.d
gpg --keyserver keys.gnupg.net --recv-keys 83EF826A
gpg --export packages@opscode.com | sudo tee /etc/apt/trusted.gpg.d/opscode-keyring.gpg &gt; /dev/null

sudo apt-get --yes --quiet update

sudo apt-get install opscode-keyring

#this line passes some config so the apt-get chef install doesn't prompt for values
echo "chef chef/chef_server_url string none" | sudo debconf-set-selections &amp;&amp; sudo apt-get install chef -y

sudo apt-get --yes --quiet install git


cd /var
sudo git clone git://github.com/opscode/chef-repo.git

sudo knife cookbook site install wordpress --cookbook-path /var/chef-repo/cookbooks

echo -e "file_cache_path \"/var/chef-repo\"\ncookbook_path \"/var/chef-repo/cookbooks\"" | sudo tee /etc/chef/solo.rb

echo '{
    "wordpress": {
        "db": {
            "database": "mywpdb",
            "host": "localhost",
            "user": "mywp",
            "password": "mywp"
        }
    },
    "run_list": ["recipe[wordpress]"]
}' | tee ~/node.json

touch ~/complete


2012-03-19 13:44:11 (process_step):: **************************************************************

2012-03-19 13:44:11 (process_step):: **** PROCESSING STEP 069ef204-71dd-11e1-8593-6ac3918d0fa3

2012-03-19 13:44:11 (process_step):: **************************************************************

2012-03-19 13:44:11 (process_step):: Command is {aws_ec2_RunInstances}

2012-03-19 13:44:11 (aws_Generic):: tclcloud::call ec2 "" RunInstances

2012-03-19 13:44:11 (aws_Generic):: tclcloud::call ec2 {} RunInstances {ImageId ami-1aad5273 MinCount 1 MaxCount 1 KeyName csk_www SecurityGroup.1 csk_cato_dev InstanceType t1.micro} {}

2012-03-19 13:44:12 (insert_audit):: RunInstances ImageId ami-1aad5273 MinCount 1 MaxCount 1 KeyName csk_www SecurityGroup.1 csk_cato_dev InstanceType t1.micro
OK
<?xml version="1.0" encoding="UTF-8"?>
<RunInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>1457ffde-324d-4631-9eec-674ff5b69be5</requestId>
    <reservationId>r-967fbff5</reservationId>
    <ownerId>168072514917</ownerId>
    <groupSet>
        <item>
            <groupId>sg-49dfcd20</groupId>
            <groupName>csk_cato_dev</groupName>
        </item>
    </groupSet>
    <instancesSet>
        <item>
            <instanceId>i-d792e8b3</instanceId>
            <imageId>ami-1aad5273</imageId>
            <instanceState>
                <code>0</code>
                <name>pending</name>
            </instanceState>
            <privateDnsName/>
            <dnsName/>
            <reason/>
            <keyName>csk_www</keyName>
            <amiLaunchIndex>0</amiLaunchIndex>
            <productCodes/>
            <instanceType>t1.micro</instanceType>
            <launchTime>2012-03-19T17:44:12.000Z</launchTime>
            <placement>
                <availabilityZone>us-east-1a</availabilityZone>
                <groupName/>
            </placement>
            <kernelId>aki-427d952b</kernelId>
            <monitoring>
                <state>disabled</state>
            </monitoring>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <stateReason>
                <code>pending</code>
                <message>pending</message>
            </stateReason>
            <architecture>x86_64</architecture>
            <rootDeviceType>ebs</rootDeviceType>
            <rootDeviceName>/dev/sda1</rootDeviceName>
            <blockDeviceMapping/>
            <virtualizationType>paravirtual</virtualizationType>
            <clientToken/>
            <hypervisor>xen</hypervisor>
        </item>
    </instancesSet>
</RunInstancesResponse>

2012-03-19 13:44:12 (aws_Generic):: result is <?xml version="1.0" encoding="UTF-8"?>
<RunInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>1457ffde-324d-4631-9eec-674ff5b69be5</requestId>
    <reservationId>r-967fbff5</reservationId>
    <ownerId>168072514917</ownerId>
    <groupSet>
        <item>
            <groupId>sg-49dfcd20</groupId>
            <groupName>csk_cato_dev</groupName>
        </item>
    </groupSet>
    <instancesSet>
        <item>
            <instanceId>i-d792e8b3</instanceId>
            <imageId>ami-1aad5273</imageId>
            <instanceState>
                <code>0</code>
                <name>pending</name>
            </instanceState>
            <privateDnsName/>
            <dnsName/>
            <reason/>
            <keyName>csk_www</keyName>
            <amiLaunchIndex>0</amiLaunchIndex>
            <productCodes/>
            <instanceType>t1.micro</instanceType>
            <launchTime>2012-03-19T17:44:12.000Z</launchTime>
            <placement>
                <availabilityZone>us-east-1a</availabilityZone>
                <groupName/>
            </placement>
            <kernelId>aki-427d952b</kernelId>
            <monitoring>
                <state>disabled</state>
            </monitoring>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <stateReason>
                <code>pending</code>
                <message>pending</message>
            </stateReason>
            <architecture>x86_64</architecture>
            <rootDeviceType>ebs</rootDeviceType>
            <rootDeviceName>/dev/sda1</rootDeviceName>
            <blockDeviceMapping/>
            <virtualizationType>paravirtual</virtualizationType>
            <clientToken/>
            <hypervisor>xen</hypervisor>
        </item>
    </instancesSet>
</RunInstancesResponse>

2012-03-19 13:44:12 (aws_Generic):: varname is result

2012-03-19 13:44:12 (aws_get_results):: setting result,1 to <RunInstancesResponse>
    <requestId>1457ffde-324d-4631-9eec-674ff5b69be5</requestId>
    <reservationId>r-967fbff5</reservationId>
    <ownerId>168072514917</ownerId>
    <groupSet>
        <item>
            <groupId>sg-49dfcd20</groupId>
            <groupName>csk_cato_dev</groupName>
        </item>
    </groupSet>
    <instancesSet>
        <item>
            <instanceId>i-d792e8b3</instanceId>
            <imageId>ami-1aad5273</imageId>
            <instanceState>
                <code>0</code>
                <name>pending</name>
            </instanceState>
            <privateDnsName/>
            <dnsName/>
            <reason/>
            <keyName>csk_www</keyName>
            <amiLaunchIndex>0</amiLaunchIndex>
            <productCodes/>
            <instanceType>t1.micro</instanceType>
            <launchTime>2012-03-19T17:44:12.000Z</launchTime>
            <placement>
                <availabilityZone>us-east-1a</availabilityZone>
                <groupName/>
            </placement>
            <kernelId>aki-427d952b</kernelId>
            <monitoring>
                <state>disabled</state>
            </monitoring>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <stateReason>
                <code>pending</code>
                <message>pending</message>
            </stateReason>
            <architecture>x86_64</architecture>
            <rootDeviceType>ebs</rootDeviceType>
            <rootDeviceName>/dev/sda1</rootDeviceName>
            <blockDeviceMapping/>
            <virtualizationType>paravirtual</virtualizationType>
            <clientToken/>
            <hypervisor>xen</hypervisor>
        </item>
    </instancesSet>
</RunInstancesResponse>


2012-03-19 13:44:12 (process_step):: **************************************************************

2012-03-19 13:44:12 (process_step):: **** PROCESSING STEP 069ef024-71dd-11e1-8593-6ac3918d0fa3

2012-03-19 13:44:12 (process_step):: **************************************************************

2012-03-19 13:44:12 (process_step):: Command is {new_connection}

2012-03-19 13:44:12 (replace_variables):: var name is //instanceId

2012-03-19 13:44:12 (replace_variables):: variable is result

2012-03-19 13:44:12 (replace_variables):: //instanceId = i-d792e8b3

2012-03-19 13:44:12 (gather_aws_system_info):: <?xml version="1.0" encoding="UTF-8"?>
<DescribeInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>ece390e5-107d-4e1c-b1bf-528b9827ad56</requestId>
    <reservationSet>
        <item>
            <reservationId>r-967fbff5</reservationId>
            <ownerId>168072514917</ownerId>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <instancesSet>
                <item>
                    <instanceId>i-d792e8b3</instanceId>
                    <imageId>ami-1aad5273</imageId>
                    <instanceState>
                        <code>0</code>
                        <name>pending</name>
                    </instanceState>
                    <privateDnsName/>
                    <dnsName/>
                    <reason/>
                    <keyName>csk_www</keyName>
                    <amiLaunchIndex>0</amiLaunchIndex>
                    <productCodes/>
                    <instanceType>t1.micro</instanceType>
                    <launchTime>2012-03-19T17:44:12.000Z</launchTime>
                    <placement>
                        <availabilityZone>us-east-1a</availabilityZone>
                        <groupName/>
                    </placement>
                    <kernelId>aki-427d952b</kernelId>
                    <monitoring>
                        <state>disabled</state>
                    </monitoring>
                    <groupSet>
                        <item>
                            <groupId>sg-49dfcd20</groupId>
                            <groupName>csk_cato_dev</groupName>
                        </item>
                    </groupSet>
                    <architecture>x86_64</architecture>
                    <rootDeviceType>ebs</rootDeviceType>
                    <rootDeviceName>/dev/sda1</rootDeviceName>
                    <blockDeviceMapping/>
                    <virtualizationType>paravirtual</virtualizationType>
                    <clientToken/>
                    <hypervisor>xen</hypervisor>
                </item>
            </instancesSet>
        </item>
    </reservationSet>
</DescribeInstancesResponse>

2012-03-19 13:44:12 (insert_audit):: Instance i-d792e8b3 status is pending. Will check again in 10 seconds.

2012-03-19 13:44:22 (gather_aws_system_info):: <?xml version="1.0" encoding="UTF-8"?>
<DescribeInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>75675c05-dc2d-4ac8-9e24-30e86166415f</requestId>
    <reservationSet>
        <item>
            <reservationId>r-967fbff5</reservationId>
            <ownerId>168072514917</ownerId>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <instancesSet>
                <item>
                    <instanceId>i-d792e8b3</instanceId>
                    <imageId>ami-1aad5273</imageId>
                    <instanceState>
                        <code>0</code>
                        <name>pending</name>
                    </instanceState>
                    <privateDnsName/>
                    <dnsName/>
                    <reason/>
                    <keyName>csk_www</keyName>
                    <amiLaunchIndex>0</amiLaunchIndex>
                    <productCodes/>
                    <instanceType>t1.micro</instanceType>
                    <launchTime>2012-03-19T17:44:12.000Z</launchTime>
                    <placement>
                        <availabilityZone>us-east-1a</availabilityZone>
                        <groupName/>
                    </placement>
                    <kernelId>aki-427d952b</kernelId>
                    <monitoring>
                        <state>disabled</state>
                    </monitoring>
                    <groupSet>
                        <item>
                            <groupId>sg-49dfcd20</groupId>
                            <groupName>csk_cato_dev</groupName>
                        </item>
                    </groupSet>
                    <architecture>x86_64</architecture>
                    <rootDeviceType>ebs</rootDeviceType>
                    <rootDeviceName>/dev/sda1</rootDeviceName>
                    <blockDeviceMapping/>
                    <virtualizationType>paravirtual</virtualizationType>
                    <clientToken/>
                    <hypervisor>xen</hypervisor>
                </item>
            </instancesSet>
        </item>
    </reservationSet>
</DescribeInstancesResponse>

2012-03-19 13:44:22 (insert_audit):: Instance i-d792e8b3 status is pending. Will check again in 10 seconds.

2012-03-19 13:44:32 (gather_aws_system_info):: <?xml version="1.0" encoding="UTF-8"?>
<DescribeInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>6be07875-f068-4857-b180-dbab35f8189e</requestId>
    <reservationSet>
        <item>
            <reservationId>r-967fbff5</reservationId>
            <ownerId>168072514917</ownerId>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <instancesSet>
                <item>
                    <instanceId>i-d792e8b3</instanceId>
                    <imageId>ami-1aad5273</imageId>
                    <instanceState>
                        <code>0</code>
                        <name>pending</name>
                    </instanceState>
                    <privateDnsName/>
                    <dnsName/>
                    <reason/>
                    <keyName>csk_www</keyName>
                    <amiLaunchIndex>0</amiLaunchIndex>
                    <productCodes/>
                    <instanceType>t1.micro</instanceType>
                    <launchTime>2012-03-19T17:44:12.000Z</launchTime>
                    <placement>
                        <availabilityZone>us-east-1a</availabilityZone>
                        <groupName/>
                    </placement>
                    <kernelId>aki-427d952b</kernelId>
                    <monitoring>
                        <state>disabled</state>
                    </monitoring>
                    <groupSet>
                        <item>
                            <groupId>sg-49dfcd20</groupId>
                            <groupName>csk_cato_dev</groupName>
                        </item>
                    </groupSet>
                    <architecture>x86_64</architecture>
                    <rootDeviceType>ebs</rootDeviceType>
                    <rootDeviceName>/dev/sda1</rootDeviceName>
                    <blockDeviceMapping/>
                    <virtualizationType>paravirtual</virtualizationType>
                    <clientToken/>
                    <hypervisor>xen</hypervisor>
                </item>
            </instancesSet>
        </item>
    </reservationSet>
</DescribeInstancesResponse>

2012-03-19 13:44:32 (insert_audit):: Instance i-d792e8b3 status is pending. Will check again in 10 seconds.

2012-03-19 13:44:42 (gather_aws_system_info):: <?xml version="1.0" encoding="UTF-8"?>
<DescribeInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>62ae6d26-ba8f-42fd-9ff8-56550956540c</requestId>
    <reservationSet>
        <item>
            <reservationId>r-967fbff5</reservationId>
            <ownerId>168072514917</ownerId>
            <groupSet>
                <item>
                    <groupId>sg-49dfcd20</groupId>
                    <groupName>csk_cato_dev</groupName>
                </item>
            </groupSet>
            <instancesSet>
                <item>
                    <instanceId>i-d792e8b3</instanceId>
                    <imageId>ami-1aad5273</imageId>
                    <instanceState>
                        <code>16</code>
                        <name>running</name>
                    </instanceState>
                    <privateDnsName>domU-12-31-39-0C-6C-34.compute-1.internal</privateDnsName>
                    <dnsName>ec2-184-73-73-124.compute-1.amazonaws.com</dnsName>
                    <reason/>
                    <keyName>csk_www</keyName>
                    <amiLaunchIndex>0</amiLaunchIndex>
                    <productCodes/>
                    <instanceType>t1.micro</instanceType>
                    <launchTime>2012-03-19T17:44:12.000Z</launchTime>
                    <placement>
                        <availabilityZone>us-east-1a</availabilityZone>
                        <groupName/>
                    </placement>
                    <kernelId>aki-427d952b</kernelId>
                    <monitoring>
                        <state>disabled</state>
                    </monitoring>
                    <privateIpAddress>10.215.111.194</privateIpAddress>
                    <ipAddress>184.73.73.124</ipAddress>
                    <groupSet>
                        <item>
                            <groupId>sg-49dfcd20</groupId>
                            <groupName>csk_cato_dev</groupName>
                        </item>
                    </groupSet>
                    <architecture>x86_64</architecture>
                    <rootDeviceType>ebs</rootDeviceType>
                    <rootDeviceName>/dev/sda1</rootDeviceName>
                    <blockDeviceMapping>
                        <item>
                            <deviceName>/dev/sda1</deviceName>
                            <ebs>
                                <volumeId>vol-976449fb</volumeId>
                                <status>attached</status>
                                <attachTime>2012-03-19T17:44:35.000Z</attachTime>
                                <deleteOnTermination>true</deleteOnTermination>
                            </ebs>
                        </item>
                    </blockDeviceMapping>
                    <virtualizationType>paravirtual</virtualizationType>
                    <clientToken/>
                    <hypervisor>xen</hypervisor>
                </item>
            </instancesSet>
        </item>
    </reservationSet>
</DescribeInstancesResponse>

2012-03-19 13:44:42 (gather_aws_system_info):: i-d792e8b3 state = running, keyname = csk_www, platform = linux, address = ec2-184-73-73-124.compute-1.amazonaws.com

2012-03-19 13:44:42 (insert_audit):: Connecting to (ubuntu@i-d792e8b3)... 

2012-03-19 13:44:42 (connect_system):: Going into system ec2-184-73-73-124.compute-1.amazonaws.com userid ubuntu with conn type of ssh - ec2
spawn /usr/bin/ssh -i /tmp/108ec91f-16d3-497e-6e83-1e77360d81fd.pem ubuntu@ec2-184-73-73-124.compute-1.amazonaws.com

2012-03-19 13:44:43 (telnet_logon):: Opened ssh.

2012-03-19 13:44:43 (telnet_logon):: Looking for password prompt...
ssh: connect to host ec2-184-73-73-124.compute-1.amazonaws.com port 22: Connection refused

2012-03-19 13:44:43 (insert_audit):: Timeout attempting to connect to ec2-184-73-73-124.compute-1.amazonaws.com. Will try again in 10 seconds.
spawn /usr/bin/ssh -i /tmp/6b61dd9c-369c-470e-5f99-16e602aa211e.pem ubuntu@ec2-184-73-73-124.compute-1.amazonaws.com

2012-03-19 13:44:53 (telnet_logon):: Opened ssh.

2012-03-19 13:44:53 (telnet_logon):: Looking for password prompt...
The authenticity of host 'ec2-184-73-73-124.compute-1.amazonaws.com (184.73.73.124)' can't be established.
RSA key fingerprint is 2c:14:bd:55:cc:c9:76:74:44:e9:a7:02:7b:3d:67:5c.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'ec2-184-73-73-124.compute-1.amazonaws.com,184.73.73.124' (RSA) to the list of known hosts.
Welcome to Ubuntu 11.04 (GNU/Linux 2.6.38-8-virtual x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Mon Mar 19 17:44:54 UTC 2012

  System load:  0.6              Processes:           60
  Usage of /:   8.2% of 7.87GB   Users logged in:     0
  Memory usage: 5%               IP address for eth0: 10.215.111.194
  Swap usage:   0%

  Graph this data and manage this system at https://landscape.canonical.com/
---------------------------------------------------------------------
At the moment, only the core of the system is installed. To tune the 
system to your needs, you can choose to install one or more          
predefined collections of software by running the following          
command:                                                             
                                                                     
   sudo tasksel --section server                                     
---------------------------------------------------------------------
New release 'oneiric' available.
Run 'do-release-upgrade' to upgrade to it.


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

]0;ubuntu@domU-12-31-39-0C-6C-34: ~ubuntu@domU-12-31-39-0C-6C-34:~$ unset PROMPT_COMMAND;export PS1='PROMPT>'
PROMPT>stty -onlcr;export PS2='';stty -echo;unalias ls
PROMPT>PROMPT>
2012-03-19 13:44:55 (insert_audit):: ssh connection to host=ec2-184-73-73-124.compute-1.amazonaws.com, user=ubuntu established.
The authenticity of host 'ec2-184-73-73-124.compute-1.amazonaws.com (184.73.73.124)' can't be established.
RSA key fingerprint is 2c:14:bd:55:cc:c9:76:74:44:e9:a7:02:7b:3d:67:5c.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'ec2-184-73-73-124.compute-1.amazonaws.com,184.73.73.124' (RSA) to the list of known hosts.
Welcome to Ubuntu 11.04 (GNU/Linux 2.6.38-8-virtual x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Mon Mar 19 17:44:54 UTC 2012

  System load:  0.6              Processes:           60
  Usage of /:   8.2% of 7.87GB   Users logged in:     0
  Memory usage: 5%               IP address for eth0: 10.215.111.194
  Swap usage:   0%

  Graph this data and manage this system at https://landscape.canonical.com/
---------------------------------------------------------------------
At the moment, only the core of the system is installed. To tune the 
system to your needs, you can choose to install one or more          
predefined collections of software by running the following          
command:                                                             
                                                                     
   sudo tasksel --section server                                     
---------------------------------------------------------------------
New release 'oneiric' available.
Run 'do-release-upgrade' to upgrade to it.


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

]0;ubuntu@domU-12-31-39-0C-6C-34: ~ubuntu@domU-12-31-39-0C-6C-34:~$ )? yes
Warning: Permanently added 'ec2-184-73-73-124.compute-1.amazonaws.com,184.73.73.124' (RSA) to the list of known hosts.
Welcome to Ubuntu 11.04 (GNU/Linux 2.6.38-8-virtual x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Mon Mar 19 17:44:54 UTC 2012

  System load:  0.6              Processes:           60
  Usage of /:   8.2% of 7.87GB   Users logged in:     0
  Memory usage: 5%               IP address for eth0: 10.215.111.194
  Swap usage:   0%

  Graph this data and manage this system at https://landscape.canonical.com/
---------------------------------------------------------------------
At the moment, only the core of the system is installed. To tune the 
system to your needs, you can choose to install one or more          
predefined collections of software by running the following          
command:                                                             
                                                                     
   sudo tasksel --section server                                     
---------------------------------------------------------------------
New release 'oneiric' available.
Run 'do-release-upgrade' to upgrade to it.


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

]0;ubuntu@domU-12-31-39-0C-6C-34: ~ubuntu@domU-12-31-39-0C-6C-34:~$ unset PROMPT_COMMAND;export PS1='PROMPT>'
PROMPT>stty -onlcr;export PS2='';stty -echo;unalias ls
PROMPT>

2012-03-19 13:44:55 (new_connection):: New Connection Type = {ssh - ec2}, connection name {CONN1}, connection asset id {i-d792e8b3}.

2012-03-19 13:44:55 (insert_audit):: New connection named CONN1 to asset ubuntu@i-d792e8b3 created with a connection type ssh - ec2

2012-03-19 13:44:55 (process_step):: **************************************************************

2012-03-19 13:44:55 (process_step):: **** PROCESSING STEP 069eef48-71dd-11e1-8593-6ac3918d0fa3

2012-03-19 13:44:55 (process_step):: **************************************************************

2012-03-19 13:44:55 (process_step):: Command is {aws_ec2_CreateTags}

2012-03-19 13:44:55 (replace_variables):: var name is //instanceId

2012-03-19 13:44:55 (replace_variables):: variable is result

2012-03-19 13:44:55 (replace_variables):: //instanceId = i-d792e8b3

2012-03-19 13:44:55 (aws_Generic):: tclcloud::call ec2 "" CreateTags

2012-03-19 13:44:55 (aws_Generic):: tclcloud::call ec2 {} CreateTags {ResourceId.1 i-d792e8b3 Tag.1.Key Name Tag.1.Value {chef wp test}} {}

2012-03-19 13:44:56 (insert_audit):: CreateTags ResourceId.1 i-d792e8b3 Tag.1.Key Name Tag.1.Value {chef wp test}
OK
<?xml version="1.0" encoding="UTF-8"?>
<CreateTagsResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>21e982ca-8bc4-4446-a980-954c3250cbba</requestId>
    <return>true</return>
</CreateTagsResponse>

2012-03-19 13:44:56 (aws_Generic):: result is <?xml version="1.0" encoding="UTF-8"?>
<CreateTagsResponse xmlns="http://ec2.amazonaws.com/doc/2011-01-01/">
    <requestId>21e982ca-8bc4-4446-a980-954c3250cbba</requestId>
    <return>true</return>
</CreateTagsResponse>

2012-03-19 13:44:56 (aws_Generic):: varname is 

2012-03-19 13:44:56 (aws_get_results):: setting ,1 to <CreateTagsResponse>
    <requestId>21e982ca-8bc4-4446-a980-954c3250cbba</requestId>
    <return>true</return>
</CreateTagsResponse>


2012-03-19 13:44:56 (process_step):: **************************************************************

2012-03-19 13:44:56 (process_step):: **** PROCESSING STEP 069eeeda-71dd-11e1-8593-6ac3918d0fa3

2012-03-19 13:44:56 (process_step):: **************************************************************

2012-03-19 13:44:56 (process_step):: Command is {cmd_line}

2012-03-19 13:44:56 (process_step):: CONN1, 300, if ; then sudo chef-solo -j ~/node.json; fi, , 

2012-03-19 13:44:56 (process_step):: Sending if ; then sudo chef-solo -j ~/node.json; fi to the process
-bash: syntax error near unexpected token `;'
PROMPT>
2012-03-19 13:44:56 (process_step):: **OK**

2012-03-19 13:44:56 (process_step):: The buffer is ->-bash: syntax error near unexpected token `;'
PROMPT><-

2012-03-19 13:44:56 (insert_audit):: if ; then sudo chef-solo -j ~/node.json; fi
-bash: syntax error near unexpected token `;'
PROMPT>

2012-03-19 13:44:56 (process_step):: The buffer is ->-bash: syntax error near unexpected token `;'<-

2012-03-19 13:44:56 (run_task_instance):: Task Completed Normally

2012-03-19 13:44:56 (update_status):: Updating task instance {4735} to {Completed}.

2012-03-19 13:44:56 (release_all):: Releasing all connections

2012-03-19 13:44:56 (release_connection):: releasing CONN1

2012-03-19 13:44:56 (release_system):: ******** Logging out {CONN1} ********

2012-03-19 13:44:56 (release_system):: Sending {exit} to spawn_id {exp14}, conn_type {ssh - ec2}.
logout
Connection to ec2-184-73-73-124.compute-1.amazonaws.com closed.

2012-03-19 13:44:56 (insert_audit):: logout
Connection to ec2-184-73-73-124.compute-1.amazonaws.com closed.

2012-03-19 13:44:56 (release_all):: Deleting key file 108ec91f-16d3-497e-6e83-1e77360d81fd.pem

2012-03-19 13:44:56 (release_all):: Deleting key file 6b61dd9c-369c-470e-5f99-16e602aa211e.pem

2012-03-19 13:44:56 (insert_audit):: <result_summary><items></items></result_summary>
