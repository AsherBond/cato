INSERT INTO `users` (`user_id`, `username`, `full_name`, `status`, `authentication_type`, `user_password`, `expiration_dt`, `security_question`, `security_answer`, `last_login_dt`, `failed_login_attempts`, `force_change`, `email`, `settings_xml`, `user_role`) 
	VALUES ('0002bdaf-bfd5-4b9d-82d1-fd39c2947d19','administrator','Administrator',1,'local','#ADMINPASSWORD#',NULL,NULL,NULL,NULL,0,1,'',NULL,'Administrator');
INSERT INTO `user_password_history` (`user_id`, `password`, `change_time`) 
	VALUES ('0002bdaf-bfd5-4b9d-82d1-fd39c2947d19','#ADMINPASSWORD#',now());
INSERT INTO `login_security_settings` (`id`, `pass_max_age`, `pass_max_attempts`, `pass_max_length`, `pass_min_length`, `pass_complexity`, `pass_age_warn_days`, `pass_require_initial_change`, `auto_lock_reset`, `login_message`, `auth_error_message`, `pass_history`, `page_view_logging`, `report_view_logging`, `allow_login`, `new_user_email_message`, `log_days`) 
	VALUES (1,90,99,15,6,0,5,0,5,'New Cato Install','Login Error - Please check your user id and password.',0,0,0,1,'',90);
INSERT INTO `logserver_settings` (`id`, `mode_off_on`, `loop_delay_sec`, `port`, `log_file_days`, `log_table_days`) 
	VALUES (1,'on',5,4010,90,90);
INSERT INTO `messenger_settings` (`id`, `mode_off_on`, `loop_delay_sec`, `retry_delay_min`, `retry_max_attempts`, `smtp_server_addr`, `smtp_server_user`, `smtp_server_password`, `smtp_server_port`, `from_email`, `from_name`, `admin_email`) 
	VALUES (1,'off',30,1,5,'','','',25,'user@example.com','Cloud Sidekick Messenger','');
INSERT INTO `poller_settings` (`id`, `mode_off_on`, `loop_delay_sec`, `max_processes`, `app_instance`) 
	VALUES (1,'on',3,4,'DEFAULT');
INSERT INTO `scheduler_settings` (`id`, `mode_off_on`, `loop_delay_sec`, `schedule_min_depth`, `schedule_max_days`, `clean_app_registry`) 
	VALUES (1,'on',5,10,60,5);

INSERT INTO `task` VALUES ('070dfda0-3ed2-4362-b2c2-51155b4f4d9d','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','1.000','Create and Manage EC2 SDB Domain','example - aws002','Creates a SDB domain and adds items with attributes then loops through one of the items and prints to the log. Deletes the domain at the end.\n\nShows how to use Xpath to loop through the results of an AWS query.','Development',0,1,NULL,NULL,'2011-07-11 21:18:56','');
INSERT INTO `task_codeblock` VALUES ('070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN');
INSERT INTO `task_step` VALUES ('88b05c82-1c49-4a10-a221-ee77367ba656','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','73b3b3d7-2074-4113-bb74-14a11b0c1de4',-1,0,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">Attribute # [[Z]] for Item_02, name = [[get.//Attribute[ [[Z]] ]/Name]], value = [[get.//Attribute[ [[Z]] ]/Value]]</message></function>','Display name value pairs for Item_02',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('3726aa38-7db6-4a34-a08b-ffdb8817ef42','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',6,0,0,'aws_sdb_GetAttributes','<function command_type=\"aws_sdb_GetAttributes\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><ItemName input_type=\"text\">Item_02</ItemName><AttributeName input_type=\"text\"></AttributeName><ConsistentRead input_type=\"text\" /><result_name input_type=\"text\">get</result_name></function>','Take a look at Item_02',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('6a7a899e-7a82-46a3-9ed8-a6ecd4b718d2','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',3,0,0,'aws_sdb_PutAttributes','<function command_type=\"aws_sdb_PutAttributes\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><ItemName input_type=\"text\">Item_01</ItemName><Attribute.X is_array=\"true\"><Attribute><Name input_type=\"text\">Category</Name><Value input_type=\"text\">Clothes</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Subcategory</Name><Value input_type=\"text\">Sweater</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Name</Name><Value input_type=\"text\">Cathair Sweater</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Color</Name><Value input_type=\"text\">Siamese</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Size</Name><Value input_type=\"text\">Small</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Size</Name><Value input_type=\"text\">Medium</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Size</Name><Value input_type=\"text\">Large</Value><Replace input_type=\"text\">true</Replace></Attribute></Attribute.X><Expected.X is_array=\"true\"><Expected><Name input_type=\"text\" /><Value input_type=\"text\" /><Exists input_type=\"text\" /></Expected></Expected.X><result_name input_type=\"text\" /></function>','Add Item_01, sweater',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('73b3b3d7-2074-4113-bb74-14a11b0c1de4','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',7,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">Z</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[get.count(//Attribute)]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">88b05c82-1c49-4a10-a221-ee77367ba656</action><max input_type=\"text\" /></function>','Loop through attributes for Item_02',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('982ec856-731f-46d4-953f-10918fd469fc','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',4,0,0,'aws_sdb_PutAttributes','<function command_type=\"aws_sdb_PutAttributes\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><ItemName input_type=\"text\">Item_02</ItemName><Attribute.X is_array=\"true\"><Attribute><Name input_type=\"text\">Category</Name><Value input_type=\"text\">Clothes</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Subcategory</Name><Value input_type=\"text\">Pants</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Name</Name><Value input_type=\"text\">Sweatpants</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Color</Name><Value input_type=\"text\">Blue</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Color</Name><Value input_type=\"text\">Yellow</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Color</Name><Value input_type=\"text\">Pink</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Size</Name><Value input_type=\"text\">Large</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Year</Name><Value input_type=\"text\">2006</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Year</Name><Value input_type=\"text\">2007</Value><Replace input_type=\"text\">true</Replace></Attribute></Attribute.X><Expected.X is_array=\"true\"><Expected><Name input_type=\"text\" /><Value input_type=\"text\" /><Exists input_type=\"text\" /></Expected></Expected.X><result_name input_type=\"text\" /></function>','Add Item_02, sweatpants',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c3766e30-f0e2-4ab8-ac2a-42493e765e8a','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',2,0,0,'aws_sdb_ListDomains','<function command_type=\"aws_sdb_ListDomains\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><MaxNumberOfDomains input_type=\"text\"/><NextToken input_type=\"text\"/><result_name input_type=\"text\"/></function>','List all the domains',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d5a01e40-92b6-4440-802c-0da4f1dc98d6','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',1,0,0,'aws_sdb_CreateDomain','<function command_type=\"aws_sdb_CreateDomain\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><result_name input_type=\"text\" /></function>','Create the domain MyStore',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e85a7acd-b587-470a-bdf0-424cf1c3088a','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',8,0,0,'aws_sdb_DeleteDomain','<function command_type=\"aws_sdb_DeleteDomain\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><result_name input_type=\"text\" /></function>','Delete MyStore',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e91f083a-4b2a-42ee-a179-a6cc8229544e','070dfda0-3ed2-4362-b2c2-51155b4f4d9d','MAIN',5,0,0,'aws_sdb_PutAttributes','<function command_type=\"aws_sdb_PutAttributes\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><DomainName input_type=\"text\">MyStore</DomainName><ItemName input_type=\"text\">Item_03</ItemName><Attribute.X is_array=\"true\"><Attribute><Name input_type=\"text\">Category</Name><Value input_type=\"text\">Car Parts</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Subcategory</Name><Value input_type=\"text\">Emissions</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Name</Name><Value input_type=\"text\">O2 Sensor</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Make</Name><Value input_type=\"text\">Audi</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Model</Name><Value input_type=\"text\">S4</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Year</Name><Value input_type=\"text\">2000</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Year</Name><Value input_type=\"text\">2001</Value><Replace input_type=\"text\">true</Replace></Attribute><Attribute><Name input_type=\"text\">Year</Name><Value input_type=\"text\">2002</Value><Replace input_type=\"text\">true</Replace></Attribute></Attribute.X><Expected.X is_array=\"true\"><Expected><Name input_type=\"text\" /><Value input_type=\"text\" /><Exists input_type=\"text\" /></Expected></Expected.X><result_name input_type=\"text\" /></function>','Add Item_03, oxygen sensor',0,0,0,NULL);

INSERT INTO `task` VALUES ('08f8bdf8-06ff-4652-95a7-61c9f9f0b97d','08f8bdf8-06ff-4652-95a7-61c9f9f0b97d','1.000','Request EC2 Spot Instances','example - aws006','Makes a request for AWS EC2 spot instances. Prompts for variable parameters. Make sure to change the security group and keyname values.','Development',0,1,NULL,NULL,'2011-06-17 13:40:58','<parameters><parameter id=\"p_5c364603-4837-4e15-be2e-eccefaf029dc\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>price</name><desc>The maximum hourly price for any Spot Instance launched to fulfill the request (e.g. 0.30)</desc><values present_as=\"value\"><value id=\"pv_0f9eff15-cfb2-43e2-985b-99700a381fec\">.02</value></values></parameter><parameter id=\"p_d027366b-0833-4deb-a49f-ae6a25efd733\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>type</name><desc>The maximum hourly price for any Spot Instance launched to fulfill the request.</desc><values present_as=\"dropdown\"><value id=\"pv_ebb8cc19-accf-44c8-9580-30b52cf85da4\">one-time</value><value id=\"pv_79f172d2-6075-41db-9d3e-7e16441baa6e\">persistent</value></values></parameter><parameter id=\"p_85161de5-dc21-4e14-9307-04435c4d3c5a\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>instance_type</name><desc>The instance type.</desc><values present_as=\"dropdown\"><value id=\"pv_33899607-ad78-4ee1-9934-b12c25fc4b6c\">m1.small</value><value id=\"pv_cd87b1bf-e089-4818-b646-8eb143823f6d\">m1.large</value><value id=\"pv_f9a02cf3-f69e-46a0-b9f4-caf9f42c704f\">t1.micro</value></values></parameter><parameter id=\"p_cb05449d-43fc-4cbc-a646-98b19ea3faf2\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>num_instances</name><desc>Number of spot instances to start</desc><values present_as=\"value\"><value id=\"pv_8e00eda3-a809-4ca0-b206-082fe8da6194\">2</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('08f8bdf8-06ff-4652-95a7-61c9f9f0b97d','MAIN');
INSERT INTO `task_step` VALUES ('9d97b9fd-dab4-4069-b087-7f803551baa0','08f8bdf8-06ff-4652-95a7-61c9f9f0b97d','MAIN',1,0,0,'aws_ec2_RequestSpotInstances','<function command_type=\"aws_ec2_RequestSpotInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><SpotPrice input_type=\"text\">[[price]]</SpotPrice><InstanceCount input_type=\"text\">[[num_instances]]</InstanceCount><Type input_type=\"text\">[[type]]</Type><ValidFrom input_type=\"text\" /><ValidUntil input_type=\"text\" /><LaunchGroup input_type=\"text\" /><AvailabilityZoneGroup input_type=\"text\" /><LaunchSpecification><ImageId input_type=\"text\">ami-7341831a</ImageId><KeyName input_type=\"text\">my_key_name</KeyName><SecurityGroupId.n is_array=\"true\"><SecurityGroupId input_type=\"text\" /></SecurityGroupId.n><SecurityGroup.n is_array=\"true\"><SecurityGroup input_type=\"text\">my_sec_group</SecurityGroup></SecurityGroup.n><UserData input_type=\"text\" /><AddressingType input_type=\"text\" /><InstanceType input_type=\"text\">[[instance_type]]</InstanceType><Placement><AvailabilityZone input_type=\"text\" /></Placement><KernelId input_type=\"text\" /><RamdiskId input_type=\"text\" /><BlockDeviceMapping.n is_array=\"true\"><BlockDeviceMapping><DeviceName input_type=\"text\" /><VirtualName input_type=\"text\" /><Ebs><SnapshotId input_type=\"text\" /><VolumeSize input_type=\"text\" /><NoDevice input_type=\"text\" /><DeleteOnTermination input_type=\"text\" /></Ebs></BlockDeviceMapping></BlockDeviceMapping.n><Monitoring><Enabled input_type=\"text\" /></Monitoring></LaunchSpecification><result_name input_type=\"text\">request</result_name></function>','Request the instances (change security group and key name)',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('f6d8a92d-5446-479f-9098-d73715e756c6','08f8bdf8-06ff-4652-95a7-61c9f9f0b97d','MAIN',2,0,0,'aws_ec2_DescribeSpotInstanceRequests','<function command_type=\"aws_ec2_DescribeSpotInstanceRequests\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><SpotInstanceRequestId.n is_array=\"true\"><SpotInstanceRequestId input_type=\"text\">[[request.//spotInstanceRequestId]]</SpotInstanceRequestId></SpotInstanceRequestId.n><Filter.n is_array=\"true\"><Filter><Name input_type=\"text\" /><Value.m is_array=\"true\"><Value input_type=\"text\" /></Value.m></Filter></Filter.n><result_name input_type=\"text\"></result_name></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('6163c165-e9b5-4b2e-a809-27ac5dad7c17','6163c165-e9b5-4b2e-a809-27ac5dad7c17','1.000','Start Stopped EC2 Server','example - aws056','Starts a stopped AWS EC2 server.','Development',0,1,NULL,NULL,'2011-08-19 08:44:23','<parameters><parameter id=\"p_62ac7628-66e4-4708-a206-3deaf77efcc0\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>instance_id</name><desc>The instance id of the EC2 server to start</desc><values present_as=\"value\"><value id=\"pv_8eade298-ec38-4717-9053-add7afa0b647\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('6163c165-e9b5-4b2e-a809-27ac5dad7c17','MAIN');
INSERT INTO `task_step` VALUES ('2e62e456-6255-463b-93fa-c45262fac583','6163c165-e9b5-4b2e-a809-27ac5dad7c17','1f0d9137-2208-43db-a16d-0841c15a7d80',-1,0,0,'end','<function command_type=\"end\"><status input_type=\"select\">Error</status><message input_type=\"text\">The instance_id parameter is required.</message></function>','instance_id is not populated, error',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('1f0d9137-2208-43db-a16d-0841c15a7d80','6163c165-e9b5-4b2e-a809-27ac5dad7c17','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[instance_id]]} == {}</eval><action input_type=\"text\">2e62e456-6255-463b-93fa-c45262fac583</action></test></tests></function>','make sure instance_id is populated',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('b659b1ce-09e3-4116-b770-736da336fa8a','6163c165-e9b5-4b2e-a809-27ac5dad7c17','MAIN',2,0,0,'aws_ec2_StartInstances','<function command_type=\"aws_ec2_StartInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><InstanceId.n is_array=\"true\"><InstanceId input_type=\"text\">[[instance_id]]</InstanceId></InstanceId.n><result_name input_type=\"text\" /></function>','start the instance',0,0,0,NULL);

INSERT INTO `task` VALUES ('7100ea85-e610-43f2-916f-f56073b4ecea','7100ea85-e610-43f2-916f-f56073b4ecea','1.000','Verify SES Email Address','example - aws014','Verifies AWM Simple Email Service email address.','Development',0,1,NULL,NULL,'2011-08-31 16:56:53','<parameters><parameter id=\"p_7449077f-e904-44e8-80e1-b18ed450a59b\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>address</name><desc>Enter email address to verify with Simple Email Service (e.g. email@example.com)</desc><values present_as=\"value\"><value id=\"pv_4e00f5a3-a045-4b85-8951-086ab0c00477\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('7100ea85-e610-43f2-916f-f56073b4ecea','MAIN');
INSERT INTO `task_step` VALUES ('dac39915-e7dd-482d-bc8d-6558e36a4af4','7100ea85-e610-43f2-916f-f56073b4ecea','MAIN',1,0,0,'aws_ses_VerifyEmailAddress','<function command_type=\"aws_ses_VerifyEmailAddress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><EmailAddress input_type=\"text\">[[address]]</EmailAddress><result_name input_type=\"text\" /></function>','verify the email address',0,0,0,NULL);

INSERT INTO `task` VALUES ('7a5c12b1-bb87-4caf-95af-ed5346e0fc59','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','1.000','Take MySQL Snapshot','example - aws003','This task serves as an example for taking a snapshot of a MySQL database volume. It makes certain assumptions at the device and volume level and will need to be customized.','Development',0,1,NULL,NULL,'2011-10-18 20:01:44','<parameters><parameter id=\"p_005422e7-4dc9-46b6-bb81-c33b438b5ef3\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>instance_id</name><desc>Database EC2 instance id</desc><values present_as=\"value\"><value id=\"pv_37d2b202-29f7-4c5c-8d1a-cda2940ca3fe\"></value></values></parameter><parameter id=\"p_7516f1a2-8dec-4780-ba4c-6c89de759919\" required=\"true\" prompt=\"true\" encrypt=\"true\"><name>root_db_password</name><desc>Root password for MySQL database</desc><values present_as=\"value\"><value id=\"pv_14a8451c-80d1-42cd-8911-192b970de1f9\"></value></values></parameter><parameter id=\"p_81f05252-603f-49ea-89b8-d7709f43e6c0\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>user</name><desc>Linux login user</desc><values present_as=\"value\"><value id=\"pv_6e32f926-4cd0-4dcb-9ce6-f05bc487ae49\">ubuntu</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN');
INSERT INTO `task_step` VALUES ('cad6e772-e876-4f17-a321-78f96e1b1b8a','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','e6fd06ad-420c-4845-95ff-601042a06dad',-1,0,0,'end','<function command_type=\"end\"><status input_type=\"select\">Error</status><message input_type=\"text\">EC2 volume id for [[device]] filesystem could not be found.</message></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81e92-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',3,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">volume</name><value input_type=\"text\">[[result.//blockDeviceMapping/item[deviceName=\'[[device]]\']/ebs/volumeId ]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81ea6-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',5,0,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">Going to take a snapshot of the [[volume]] volume</message></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81eba-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',2,0,0,'aws_ec2_DescribeInstances','<function command_type=\"aws_ec2_DescribeInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><InstanceId.n is_array=\"true\"><InstanceId input_type=\"text\">[[instance_id]]</InstanceId></InstanceId.n><Filter.n is_array=\"true\"><Filter><Name input_type=\"text\" /><Value.m is_array=\"true\"><Value input_type=\"text\" /></Value.m></Filter></Filter.n><result_name input_type=\"text\">result</result_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81ece-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',8,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">FLUSH TABLES WITH READ LOCK;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\"></positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81ee2-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',14,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">exit</command><timeout input_type=\"text\" /><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81ef6-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',13,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">UNLOCK TABLES;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\"></positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f32-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',7,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">mysql -u root -p[[root_db_password]] --prompt=\"PROMPT&gt;\"</command><timeout input_type=\"text\" /><positive_response input_type=\"text\"></positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f46-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',12,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">SYSTEM sudo xfs_freeze -u /vol</command><timeout input_type=\"text\" /><positive_response input_type=\"text\"></positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f5a-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',10,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">SYSTEM sudo xfs_freeze -f /vol</command><timeout input_type=\"text\" /><positive_response input_type=\"text\"></positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f6e-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',11,0,0,'aws_ec2_CreateSnapshot','<function command_type=\"aws_ec2_CreateSnapshot\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><VolumeId input_type=\"text\">[[volume]]</VolumeId><Description input_type=\"text\">db snap</Description><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f82-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',6,0,0,'new_connection','<function command_type=\"new_connection\"><conn_type input_type=\"select\">ssh - ec2</conn_type><asset input_type=\"text\">[[user]]@[[instance_id]]</asset><conn_name input_type=\"text\">CONN1</conn_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00b81f96-f9c4-11e0-a8e4-12313b125aec','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',9,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">SHOW MASTER STATUS;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('032819a2-b8e0-40d6-bef0-233809375f7f','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">device</name><value input_type=\"text\">/dev/sdh</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e6fd06ad-420c-4845-95ff-601042a06dad','7a5c12b1-bb87-4caf-95af-ed5346e0fc59','MAIN',4,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[volume]]} == {}</eval><action input_type=\"text\">cad6e772-e876-4f17-a321-78f96e1b1b8a</action></test></tests></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('a1ef3208-0aee-40cf-9d70-8ff2648c350b','a1ef3208-0aee-40cf-9d70-8ff2648c350b','1.000','Create VPC with VPN Gateway','example - aws004','Creates an AWS Virtual Private Cloud subnet with a VPN gateway and connection. Parameters required: customer VPN endpoint ip address and Border Gateway Protocol (BGP) Autonomous System Number (ASN).','Development',0,1,NULL,NULL,'2011-07-05 15:53:14','<parameters><parameter id=\"p_bfa086f2-ea0e-4ab2-ace4-14b8acbab4d3\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>vpn_address</name><desc>The Internet-routable IP address for the customer gateway\'s outside interface. The address must be static.</desc><values present_as=\"value\"><value id=\"pv_3466be45-a3a3-4d22-a758-e6db9a860324\">212.24.124.2</value></values></parameter><parameter id=\"p_46b91d51-204b-42fa-b186-d524ffdb74d1\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>bgp_asn</name><desc>The customer gateway\'s Border Gateway Protocol (BGP) Autonomous System Number (ASN).</desc><values present_as=\"value\"><value id=\"pv_79a3d356-8b53-4805-900b-4ce8335826f5\">65534</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN');
INSERT INTO `task_step` VALUES ('04d6dc14-3474-4c74-9c14-b69d5fb41578','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',6,0,0,'aws_vpc_CreateVpnGateway','<function command_type=\"aws_vpc_CreateVpnGateway\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Type input_type=\"text\">ipsec.1</Type><AvailabilityZone input_type=\"text\" /><result_name input_type=\"text\">vpn_gateway</result_name></function>','create vpn gateway',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('0a4d641a-d037-489c-b412-f1244581ee70','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',3,0,0,'aws_vpc_DescribeVpcs','<function command_type=\"aws_vpc_DescribeVpcs\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><VpcId.n is_array=\"true\"><VpcId input_type=\"text\">[[vpc_id]]</VpcId></VpcId.n><Filter.n is_array=\"true\"><Filter><Name input_type=\"text\" /><Value.m is_array=\"true\"><Value input_type=\"text\" /></Value.m></Filter></Filter.n><result_name input_type=\"text\" /></function>','show the created vpc',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('2db131cc-3347-45e0-940b-c2ff2b218638','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',7,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">v_gateway</name><value input_type=\"text\">[[vpn_gateway.//vpnGatewayId]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable><variable><name input_type=\"text\">c_gateway</name><value input_type=\"text\">[[customer_gateway.//customerGatewayId]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','setup a variable for the vpn gateway id and customer gateway id',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('85199518-df75-4676-8bfe-706f228526d0','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',1,0,0,'aws_vpc_CreateVpc','<function command_type=\"aws_vpc_CreateVpc\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><CidrBlock input_type=\"text\">10.0.0.0/24</CidrBlock><instanceTenancy input_type=\"text\" /><result_name input_type=\"text\">vpc</result_name></function>','create main subnet',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('b9718b0d-637e-4d49-9846-603638f240a2','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',9,0,0,'aws_vpc_CreateVpnConnection','<function command_type=\"aws_vpc_CreateVpnConnection\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Type input_type=\"text\">ipsec.1</Type><CustomerGatewayId input_type=\"text\">[[c_gateway]]</CustomerGatewayId><VpnGatewayId input_type=\"text\">[[v_gateway]]</VpnGatewayId><result_name input_type=\"text\" /></function>','create vpn connection to vpn endpoint',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('dd557fa9-1393-4226-ac42-095d2f8252cc','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',2,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">vpc_id</name><value input_type=\"text\">[[vpc.//vpcId]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','setup a variable for the vpc id',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ddc3c34d-47ea-43c7-92df-d74950b6fc32','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',8,0,0,'aws_vpc_AttachVpnGateway','<function command_type=\"aws_vpc_AttachVpnGateway\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><VpnGatewayId input_type=\"text\">[[v_gateway]]</VpnGatewayId><VpcId input_type=\"text\">[[vpc_id]]</VpcId><result_name input_type=\"text\" /></function>','attach the vpn gateway to the vpc',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e42a1454-7d56-44cf-98f4-e605bb477f03','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',5,0,0,'aws_vpc_CreateCustomerGateway','<function command_type=\"aws_vpc_CreateCustomerGateway\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Type input_type=\"text\">ipsec.1</Type><IpAddress input_type=\"text\">[[vpn_address]]</IpAddress><BgpAsn input_type=\"text\">[[bgp_asn]]</BgpAsn><result_name input_type=\"text\">customer_gateway</result_name></function>','create ipsec gateway',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('edbaaf90-28b3-47b3-8401-8bce4303012a','a1ef3208-0aee-40cf-9d70-8ff2648c350b','MAIN',4,0,0,'aws_vpc_CreateSubnet','<function command_type=\"aws_vpc_CreateSubnet\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><VpcId input_type=\"text\">[[vpc_id]]</VpcId><CidrBlock input_type=\"text\">10.0.0.0/25</CidrBlock><AvailabilityZone input_type=\"text\"></AvailabilityZone><result_name input_type=\"text\" /></function>','create subnet',0,0,0,NULL);

INSERT INTO `task` VALUES ('c7f1227f-14d3-41c4-8437-a6ae5f452041','c7f1227f-14d3-41c4-8437-a6ae5f452041','1.000','Open WWW Ports to World','example - aws051','Opens port 80 and 443 to the world for EC2 security group.','Development',0,1,NULL,NULL,'2011-08-17 13:26:32','<parameters><parameter id=\"p_106fa0db-3ae4-45c8-9aaf-867aa22972a4\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>security_group_name</name><desc>The name of the EC2 security group to open access to</desc><values present_as=\"value\"><value id=\"pv_3f111202-a73e-4fea-8e46-75f4ae46ca5f\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('c7f1227f-14d3-41c4-8437-a6ae5f452041','MAIN');
INSERT INTO `task_step` VALUES ('d3c6d524-a87f-4b3a-bb25-f94c9d060989','c7f1227f-14d3-41c4-8437-a6ae5f452041','MAIN',1,0,0,'aws_ec2_AuthorizeSecurityGroupIngress','<function command_type=\"aws_ec2_AuthorizeSecurityGroupIngress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><UserId input_type=\"text\" /><GroupId input_type=\"text\" /><GroupName input_type=\"text\">[[security_group_name]]</GroupName><IpPermissions.n is_array=\"true\"><IpPermissions><IpProtocol input_type=\"text\">tcp</IpProtocol><FromPort input_type=\"text\">80</FromPort><ToPort input_type=\"text\">80</ToPort><Groups.m is_array=\"true\"><Groups><UserId input_type=\"text\" /><GroupName input_type=\"text\" /><GroupId input_type=\"text\" /></Groups></Groups.m><IpRanges.m is_array=\"true\"><IpRanges><CidrIp input_type=\"text\">0.0.0.0/0</CidrIp></IpRanges></IpRanges.m></IpPermissions><IpPermissions><IpProtocol input_type=\"text\">tcp</IpProtocol><FromPort input_type=\"text\">443</FromPort><ToPort input_type=\"text\">443</ToPort><Groups.m is_array=\"true\"><Groups><UserId input_type=\"text\" /><GroupName input_type=\"text\" /><GroupId input_type=\"text\" /></Groups></Groups.m><IpRanges.m is_array=\"true\"><IpRanges><CidrIp input_type=\"text\">0.0.0.0/0</CidrIp></IpRanges></IpRanges.m></IpPermissions></IpPermissions.n><result_name input_type=\"text\" /></function>','open ports 80, 443 to all incoming',0,0,0,NULL);

INSERT INTO `task` VALUES ('ef1be083-2701-484a-b097-d2009d9e158b','ef1be083-2701-484a-b097-d2009d9e158b','1.000','EC2 DescribeInstances and SSH Login','example - aws005','Demonstrates using the EC2 DescribeInstances command to filter based on Tag name and value to get an EC2 instance id and log into the linux virtual machine using ssh. \n\nChange the linux user name on the Parameters tab and the tag name and value filter on the DescribeInstances command.','Development',0,1,NULL,NULL,'2011-05-05 20:17:26','<parameters><parameter id=\"p_12f806fb-774f-4efd-8fe8-ef6a88d71e19\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>unix_user</name><desc>Enter the user id to login to the linux virtual machine with</desc><values present_as=\"value\"><value id=\"pv_75359547-60f2-4bb3-8a8b-4bcf4e51a97f\">ubuntu</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('ef1be083-2701-484a-b097-d2009d9e158b','MAIN');
INSERT INTO `task_codeblock` VALUES ('ef1be083-2701-484a-b097-d2009d9e158b','print filesystem info');
INSERT INTO `task_step` VALUES ('7cfc172e-ef9e-487a-887c-67263ae729c6','ef1be083-2701-484a-b097-d2009d9e158b','cdd85ae8-19fa-4e3f-9171-5ab4a5b3a3a6',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">print filesystem info</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('1b3e73e0-f077-4c42-a87d-e5dd0ba4815b','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',3,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">instance_id</name><value input_type=\"text\">[[result.//instanceId]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','Copy the instance id from the xml to a variable',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('394d45b1-2b42-41b2-9a64-09d76b075fb1','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',4,0,0,'new_connection','<function command_type=\"new_connection\"><conn_type input_type=\"select\">ssh - ec2</conn_type><asset input_type=\"text\">[[unix_user]]@[[instance_id]]</asset><conn_name input_type=\"text\">CONN1</conn_name></function>','Using the instance_id variable as the connect and the parameter unix_user',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('76064b43-ceda-48d7-8b50-597ae7806df4','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',1,0,0,'aws_ec2_DescribeInstances','<function command_type=\"aws_ec2_DescribeInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><InstanceId.n is_array=\"true\"><InstanceId input_type=\"text\" /></InstanceId.n><Filter.n is_array=\"true\"><Filter><Name input_type=\"text\">tag:Name</Name><Value.m is_array=\"true\"><Value input_type=\"text\">cato demo</Value></Value.m></Filter></Filter.n><result_name input_type=\"text\">result</result_name></function>','Filtering on Name, change Cato Demo to an appropriate name',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('a7de45bd-b612-49db-98e0-9914b1b1ceb9','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',2,0,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">The instance Id is  -&gt;[[result.//instanceId]]&lt;-</message></function>','The result variable holds the describe xml. Displaying the instance id',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('cdd85ae8-19fa-4e3f-9171-5ab4a5b3a3a6','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',6,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">z</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[filesystem,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">7cfc172e-ef9e-487a-887c-67263ae729c6</action><max input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d8d835ed-427b-4e0e-a785-70605310bbab','ef1be083-2701-484a-b097-d2009d9e158b','MAIN',5,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">df -h</command><timeout input_type=\"text\" /><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','Check the file system capacities',2,10,32,'<variables><variable><name>filesystem</name><type>delimited</type><position>1</position></variable><variable><name>size</name><type>delimited</type><position>2</position></variable></variables>');
INSERT INTO `task_step` VALUES ('d62cd1bf-82d5-4f75-a31e-f33fe617993a','ef1be083-2701-484a-b097-d2009d9e158b','print filesystem info',1,0,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">filesystem name = [[filesystem,[[z]]]], size = [[size,[[z]]]]</message></function>','',0,0,0,NULL);


INSERT INTO `task` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','1384714b-bcbb-488b-8c21-8360ec5c11e3','1.000','Start Wordpress Webserver','wp - 035','Starts Ubuntu linux servers and installs Wordpress.','Development',0,1,NULL,NULL,'2011-07-28 17:39:06','<parameters><parameter id=\"p_25576b5f-e5ef-4496-b2b2-b4b2ce36940a\" required=\"true\" prompt=\"true\"><name>SERVERS_TO_START</name><desc>This is the number of servers that will be started</desc><values present_as=\"value\"><value id=\"pv_e945e1a5-d07e-4278-b971-29dd7f186c56\">1</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','Check Server Status');
INSERT INTO `task_codeblock` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','Get Server Address');
INSERT INTO `task_codeblock` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','MAIN');
INSERT INTO `task_codeblock` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','Register with Load Balancer');
INSERT INTO `task_codeblock` VALUES ('1384714b-bcbb-488b-8c21-8360ec5c11e3','Test Server Website');
INSERT INTO `task_step` VALUES ('202605cc-50be-4d06-bf28-a6571b5d2f47','1384714b-bcbb-488b-8c21-8360ec5c11e3','73665381-21b7-446f-aeae-2dba4e8a8e70',-1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[InstanceRegistered]],[[X]]]]} == {no}</eval><action input_type=\"text\" /></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('b5a7fad2-1200-49bd-89c1-0d801d1dd3d5','1384714b-bcbb-488b-8c21-8360ec5c11e3','cbd707a3-9442-4254-9eca-a4414b2615ea',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Get Server Address</codeblock></function>','register each webserver',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('73665381-21b7-446f-aeae-2dba4e8a8e70','1384714b-bcbb-488b-8c21-8360ec5c11e3','Check Server Status',1,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[InstanceId,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">202605cc-50be-4d06-bf28-a6571b5d2f47</action><max input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('00a4ede6-e819-4fb2-bddf-2e425310d227','1384714b-bcbb-488b-8c21-8360ec5c11e3','Get Server Address',1,0,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">instance -&gt; [[~RunInstancesResult.//item[ [[X]] ]//instanceId]]</message></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('03a9559b-bbbe-4669-b54a-82f0af576814','1384714b-bcbb-488b-8c21-8360ec5c11e3','Get Server Address',2,0,0,'aws_elb_RegisterInstancesWithLoadBalancer','<function command_type=\"aws_elb_RegisterInstancesWithLoadBalancer\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Instances><member.N is_array=\"true\"><member><InstanceId input_type=\"text\">[[~RunInstancesResult.//item[ [[X]] ]//instanceId]]</InstanceId></member></member.N></Instances><LoadBalancerName input_type=\"text\">[[@ELB_NAME]]</LoadBalancerName><result_name input_type=\"text\" /></function>','add server to load balancer',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('11343ab3-53a8-48e3-910d-589f4d973672','1384714b-bcbb-488b-8c21-8360ec5c11e3','MAIN',1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">userdata</name><value input_type=\"text\">#!/bin/bash\r\nset -e -x\r\nexport DEBIAN_FRONTEND=noninteractive\r\nsudo apt-get -y -q=2 install apache2 php5-mysql libapache2-mod-php5\r\nsudo apt-get -y -q=2 install wordpress php5-gd\r\nsudo ln -s /usr/share/wordpress /var/www/wordpress\r\nsudo rm /var/www/wordpress/wp-config.php\r\nsudo cp /var/www/wordpress/wp-config-sample.php /var/www/wordpress/wp-config.php\r\nsudo sed -i \"s|database_name_here|wordpress|\"  /var/www/wordpress/wp-config.php\r\nsudo sed -i \"s|username_here|wordpress|\"  /var/www/wordpress/wp-config.php\r\nsudo sed -i \"s|password_here|wordpress|\"  /var/www/wordpress/wp-config.php\r\nsudo sed -i \"s|localhost|[[@master_db_address]]|\"  /var/www/wordpress/wp-config.php</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','define wordpress install script',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c62ec8cc-0c0c-4cb9-b2c9-a038d75ed162','1384714b-bcbb-488b-8c21-8360ec5c11e3','MAIN',2,0,0,'aws_ec2_RunInstances','<function command_type=\"aws_ec2_RunInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><ImageId input_type=\"text\">ami-1aad5273</ImageId><MinCount input_type=\"text\">[[SERVERS_TO_START]]</MinCount><MaxCount input_type=\"text\">[[SERVERS_TO_START]]</MaxCount><KeyName input_type=\"text\">[[@KEYPAIR_NAME]]</KeyName><SecurityGroupId.n is_array=\"true\"><SecurityGroupId input_type=\"text\" /></SecurityGroupId.n><SecurityGroup.n is_array=\"true\"><SecurityGroup input_type=\"text\">[[@SECURITY_GROUP_NAME]]</SecurityGroup></SecurityGroup.n><UserData input_type=\"text\">[[userdata]]</UserData><AddressingType input_type=\"text\" /><InstanceType input_type=\"text\">t1.micro</InstanceType><Placement><AvailabilityZone input_type=\"text\" /><GroupName input_type=\"text\" /><Tenancy input_type=\"text\" /></Placement><KernelId input_type=\"text\" /><RamdiskId input_type=\"text\" /><BlockDeviceMapping.n is_array=\"true\"><BlockDeviceMapping><DeviceName input_type=\"text\" /><NoDevice input_type=\"text\" /><VirtualName input_type=\"text\" /><Ebs><SnapshotId input_type=\"text\" /><VolumeSize input_type=\"text\" /><DeleteOnTermination input_type=\"text\" /></Ebs></BlockDeviceMapping></BlockDeviceMapping.n><Monitoring><Enabled input_type=\"text\" /></Monitoring><SubnetId input_type=\"text\" /><DisableApiTermination input_type=\"text\" /><InstanceInitiatedShutdownBehavior input_type=\"text\" /><PrivateIpAddress input_type=\"text\" /><ClientToken input_type=\"text\" /><instance_role input_type=\"text\" label=\"Server Role\">webserver</instance_role><result_name input_type=\"text\">RunInstancesResult</result_name></function>','start webserver(s)',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('cbd707a3-9442-4254-9eca-a4414b2615ea','1384714b-bcbb-488b-8c21-8360ec5c11e3','MAIN',4,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[~RunInstancesResult.count(//instanceId)]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">b5a7fad2-1200-49bd-89c1-0d801d1dd3d5</action><max input_type=\"text\" /></function>','spin through list of webservers and register',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('493ca2b5-b5b1-47b3-a138-31e17a21b738','1384714b-bcbb-488b-8c21-8360ec5c11e3','MAIN',3,1,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">60</seconds></function>','sleep, let servers startup',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('27104ad6-a3d7-4e11-8fc4-d2a60dd3eed0','1384714b-bcbb-488b-8c21-8360ec5c11e3','Test Server Website',1,0,0,'http','<function command_type=\"http\"><type input_type=\"select\">GET</type><url input_type=\"text\"/></function>','',2,0,0,NULL);

INSERT INTO `task` VALUES ('22627126-9dbe-49cc-97fd-cba516e06435','22627126-9dbe-49cc-97fd-cba516e06435','1.000','Create MySQL Database for Wordpress','wp - 036','Called as a subtask, creates either a master or slave Wordpress MySQL database.','Development',0,1,NULL,NULL,'2011-07-28 22:15:20','<parameters><parameter id=\"p_9a9d433a-459e-4d44-9615-2a6090e4ad05\" required=\"true\" prompt=\"true\" encrypt=\"true\"><name>DBPassword</name><desc>The database root password</desc><values present_as=\"value\"><value id=\"pv_b93c1a84-454a-49ad-b713-d0f9e8f2ce7b\"></value></values></parameter><parameter id=\"p_ba5f9f99-8d43-413c-bb86-615efb736df7\" required=\"true\" prompt=\"true\"><name>DB_ROLE</name><desc>Select master, slave or standalone</desc><values present_as=\"list\"><value id=\"pv_114dc0fb-5126-49e4-b68c-498cab767131\">standalone</value><value id=\"pv_3ff10647-1782-43cb-9b49-bdb2f10efef4\">master</value><value id=\"pv_76df1329-dcf0-4768-be17-2a915af35718\">slave</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('22627126-9dbe-49cc-97fd-cba516e06435','MAIN');
INSERT INTO `task_codeblock` VALUES ('22627126-9dbe-49cc-97fd-cba516e06435','Setup Master');
INSERT INTO `task_codeblock` VALUES ('22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave');
INSERT INTO `task_step` VALUES ('4067d7e2-d604-4748-93a6-0e791ee29407','22627126-9dbe-49cc-97fd-cba516e06435','60d09408-d96d-4d3c-b51f-a355085dfcb2',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_INSTANCE</name><value input_type=\"text\">[[@master_db_instance]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('a52c2a30-628e-443a-baa4-350c9478873a','22627126-9dbe-49cc-97fd-cba516e06435','60d09408-d96d-4d3c-b51f-a355085dfcb2',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_INSTANCE</name><value input_type=\"text\">[[@slave_db_instance]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4e559b12-ae03-4967-addc-b71bcab8c3e4','22627126-9dbe-49cc-97fd-cba516e06435','88ee52ac-c811-477e-9c19-d2ce59372e7f',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Setup Master</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('64df7a43-4227-4d19-bf1f-bfa596d62787','22627126-9dbe-49cc-97fd-cba516e06435','88ee52ac-c811-477e-9c19-d2ce59372e7f',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Setup Slave</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('09e29275-2416-4084-ad44-6e22d4293b58','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',7,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">flush privileges;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('60d09408-d96d-4d3c-b51f-a355085dfcb2','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_ROLE]]} == {master} || {[[DB_ROLE]]} == {standalone}</eval><action input_type=\"text\">4067d7e2-d604-4748-93a6-0e791ee29407</action></test><test><eval input_type=\"text\">{[[DB_ROLE]]} == {slave}</eval><action input_type=\"text\">a52c2a30-628e-443a-baa4-350c9478873a</action></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('6475f3f4-23bb-4dcf-9d7d-68b040f86c39','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',8,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">exit;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('6cc52f36-e41f-4f2b-a9d0-b1498eaeecdc','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',3,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">60</seconds></function>','wait 30 seconds, sometimes mysql comes up after sshd',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('7e5091b2-c1c2-424c-9ad4-d2a306df0430','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',6,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">grant all privileges on wordpress.* to \"wordpress\"@\"%\" identified by \"wordpress\";</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('88ee52ac-c811-477e-9c19-d2ce59372e7f','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',12,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_ROLE]]} == {master}</eval><action input_type=\"text\">4e559b12-ae03-4967-addc-b71bcab8c3e4</action></test><test><eval input_type=\"text\">{[[DB_ROLE]]} == {slave}</eval><action input_type=\"text\">64df7a43-4227-4d19-bf1f-bfa596d62787</action></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('9797773c-9562-4920-bee5-94a4699bb266','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',2,0,0,'new_connection','<function command_type=\"new_connection\"><conn_type input_type=\"select\">ssh - ec2</conn_type><asset input_type=\"text\">ubuntu@[[DB_INSTANCE]]</asset><conn_name input_type=\"text\">CONN1</conn_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('993f405c-f1d3-42d9-a5a4-cdbc42854794','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',10,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">5</seconds></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('af9a9def-b248-46a9-9adb-5594cf8b3b47','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',9,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">sudo service mysql restart</command><timeout input_type=\"text\">60</timeout><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('d605a8f4-c4c6-405c-9c22-a26fa1879d32','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',11,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">sudo mysql -u root -p[[DBPassword]]</command><timeout input_type=\"text\"></timeout><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\">PROMPT&gt;</negative_response></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('edb3f2f3-d6c5-4bb5-9eb9-a73d17603ab8','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',4,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">sudo mysql -u root -p[[DBPassword]]</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\">PROMPT&gt;</negative_response></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('eec3809f-a00b-41ba-9d20-3cbff6d45439','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',13,0,0,'drop_connection','<function command_type=\"drop_connection\"><conn_name input_type=\"text\">CONN1</conn_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('f06b864e-c805-4a50-bd39-70ab66919cc6','22627126-9dbe-49cc-97fd-cba516e06435','MAIN',5,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">create database wordpress;</command><timeout input_type=\"text\"></timeout><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('101ffa68-ca2a-4cde-b753-22ae5344310c','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',5,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">FLUSH PRIVILEGES;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('2ef15322-733f-45f8-93c1-5a652cb40e4e','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',2,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">FLUSH PRIVILEGES;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('33f0fd4a-d801-4692-8f6a-0b06ef769ad1','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',1,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">GRANT REPLICATION SLAVE ON *.* to \'wordpress_repl\'@\'%\' IDENTIFIED BY \'[[@master_db_password]]\';</command><timeout input_type=\"text\"></timeout><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('8b7c86d1-d771-43c8-bd66-ee5bef3ff3f5','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',3,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">GRANT RELOAD ON *.* TO \'wordpress_repl\'@\'%\';</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('d25b3f5e-0947-46d3-b6b8-ebcc104a0cef','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',6,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">USE wordpress;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('e8ab6c8e-bf7e-46bc-ad17-6f193e523a8a','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',4,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">GRANT SUPER ON *.* TO \'wordpress_repl\'@\'%\';</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('e8d9c4cf-11df-4820-b409-457659ee8d38','22627126-9dbe-49cc-97fd-cba516e06435','Setup Master',7,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">FLUSH TABLES WITH READ LOCK;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('02c0bc13-be14-43c6-a746-65a0bf1ca7cf','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',9,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">UNLOCK TABLES;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('07d78897-d8a8-42a9-9cb0-8555c53327f3','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',5,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">exit</command><timeout input_type=\"text\" /><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('173f5785-cab7-4e3f-8110-de026e6f8660','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',3,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">START SLAVE;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('65f1a75d-1249-4d79-9f01-cfd28de672ed','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',2,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">RESET SLAVE;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('910c25aa-0fdb-4e7e-af11-08b8e3411507','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',7,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">sudo mysql -u root -p[[DBPassword]]</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('a303f710-24ae-4fff-912d-212d274d3781','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',1,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">STOP SLAVE;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('ab8a2cdf-1b2a-4b00-a962-60ccc668ae37','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',8,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">use wordpress;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('ae73c642-0396-430a-b598-f41960e73bd8','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',6,0,0,'new_connection','<function command_type=\"new_connection\"><conn_type input_type=\"select\">ssh - ec2</conn_type><asset input_type=\"text\">ubuntu@[[@master_db_instance]]</asset><conn_name input_type=\"text\">CONN1</conn_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('f992831b-39f7-4073-ad75-bd2718bc6997','22627126-9dbe-49cc-97fd-cba516e06435','Setup Slave',4,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">LOAD DATA FROM MASTER;</command><timeout input_type=\"text\" /><positive_response input_type=\"text\">mysql&gt;</positive_response><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);

INSERT INTO `task` VALUES ('3079444b-c680-491d-8019-2023e51b6394','3079444b-c680-491d-8019-2023e51b6394','1.000','Remove Webservers','wp - 041','Removes from the load balancer and terminates one or more Wordpress webservers.','Development',0,1,NULL,NULL,'2011-08-02 23:18:20','<parameters><parameter id=\"p_f00122f0-e41a-4d1f-9aba-8658ae5e73a7\" required=\"true\" prompt=\"true\"><name>SERVERS_TO_REMOVE</name><desc>Enter the number of servers to remove from the load balancer and terminate</desc><values present_as=\"value\"><value id=\"pv_b81dc7a7-2e9a-401f-a216-5e2615dadbfc\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('3079444b-c680-491d-8019-2023e51b6394','MAIN');
INSERT INTO `task_codeblock` VALUES ('3079444b-c680-491d-8019-2023e51b6394','Remove Server');
INSERT INTO `task_step` VALUES ('884d72f2-0541-4128-89a1-e2b07783b676','3079444b-c680-491d-8019-2023e51b6394','77692e59-74b7-47c4-94e8-ca19520dfc9f',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Remove Server</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('beb7bc5b-1cfc-46bd-bdbd-68f05d56915f','3079444b-c680-491d-8019-2023e51b6394','bb41c699-9fbd-4cd4-856b-5fae50688124',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">SERVERS_TO_REMOVE</name><value input_type=\"text\">calc([[~elb_result.count(//InstanceId)]] - 1)</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('77692e59-74b7-47c4-94e8-ca19520dfc9f','3079444b-c680-491d-8019-2023e51b6394','MAIN',3,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[SERVERS_TO_REMOVE]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">884d72f2-0541-4128-89a1-e2b07783b676</action><max input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('bb41c699-9fbd-4cd4-856b-5fae50688124','3079444b-c680-491d-8019-2023e51b6394','MAIN',2,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[SERVERS_TO_REMOVE]]} &gt;= {[[~elb_result.count(//InstanceId)]]}</eval><action input_type=\"text\">beb7bc5b-1cfc-46bd-bdbd-68f05d56915f</action></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e3a32423-45ee-4e0e-8260-1f32740e8021','3079444b-c680-491d-8019-2023e51b6394','MAIN',1,0,0,'aws_elb_DescribeInstanceHealth','<function command_type=\"aws_elb_DescribeInstanceHealth\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Instances><member.N is_array=\"true\"><member><InstanceId input_type=\"text\" /></member></member.N></Instances><LoadBalancerName input_type=\"text\">[[@elb_name]]</LoadBalancerName><result_name input_type=\"text\">elb_result</result_name></function>','Get a list of load balanced instances',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('28844302-5b91-4c71-9ff6-fd106ae78cb7','3079444b-c680-491d-8019-2023e51b6394','Remove Server',1,0,0,'aws_elb_DeregisterInstancesFromLoadBalancer','<function command_type=\"aws_elb_DeregisterInstancesFromLoadBalancer\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Instances><member.N is_array=\"true\"><member><InstanceId input_type=\"text\">[[~elb_result.//InstanceStates/member[ [[X]] ]//InstanceId]]</InstanceId></member></member.N></Instances><LoadBalancerName input_type=\"text\">[[@elb_name]]</LoadBalancerName><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('40c26a60-061a-437d-bd11-2238a13485b5','3079444b-c680-491d-8019-2023e51b6394','Remove Server',2,0,0,'aws_ec2_TerminateInstances','<function command_type=\"aws_ec2_TerminateInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><InstanceId.n is_array=\"true\"><InstanceId input_type=\"text\">[[~elb_result.//InstanceStates/member[ [[X]] ]//InstanceId]]</InstanceId></InstanceId.n><result_name input_type=\"text\" /></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','59f657b7-d109-4e37-878e-e6c98f5e0b23','1.000','Stop Wordpress','wp - 038','Stops the full Wordpress Ecosystem.','Development',0,1,NULL,NULL,'2011-08-01 18:47:31','<parameters><parameter id=\"p_690d607b-2821-477e-9ec4-345473709a45\" required=\"true\" prompt=\"true\"><name>CONFIRM_YES</name><desc>hint: type \"yes\"</desc><values present_as=\"value\"><value id=\"pv_e637ffb4-d88e-4c20-8825-c55db6085d6b\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','Delete Keypair');
INSERT INTO `task_codeblock` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','Delete Security Group');
INSERT INTO `task_codeblock` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN');
INSERT INTO `task_codeblock` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','Terminate EC2 Instance');
INSERT INTO `task_codeblock` VALUES ('59f657b7-d109-4e37-878e-e6c98f5e0b23','Terminate Load Balancer');
INSERT INTO `task_step` VALUES ('e7858918-7fa1-4766-b411-5492544eb2cb','59f657b7-d109-4e37-878e-e6c98f5e0b23','2e90a606-702d-4842-b940-978348c04791',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Terminate Load Balancer</codeblock></function>','terminate load balancer',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('348768b5-78df-49b1-ba86-7d64b9e94004','59f657b7-d109-4e37-878e-e6c98f5e0b23','45fc0920-4dd3-4b39-8a3d-15e299507524',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Delete Keypair</codeblock></function>','delete keypair',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('12f370ed-63d8-473a-8c54-a8d9e91e62f6','59f657b7-d109-4e37-878e-e6c98f5e0b23','4bba270d-b1e2-4879-8e05-57c9e0a107ce',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Terminate EC2 Instance</codeblock></function>','terminate instance',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e6a2c8ce-9de2-472a-92c7-3c414f14dee7','59f657b7-d109-4e37-878e-e6c98f5e0b23','68093fa5-34c4-42f1-be76-6c7e88b4b41d',-1,0,0,'aws_ec2_ReleaseAddress','<function command_type=\"aws_ec2_ReleaseAddress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><PublicIp input_type=\"text\">[[ADDRESSES,[[X]]]]</PublicIp><AllocationId input_type=\"text\" /><result_name input_type=\"text\" /></function>','release elastic ips',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e9ebee66-8547-4d93-9720-81faa053ea73','59f657b7-d109-4e37-878e-e6c98f5e0b23','6c24270d-f039-4981-b12c-c2f01b91a8ec',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Delete Security Group</codeblock></function>','delete the security group',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e8d79dc5-149a-4881-b065-fdaecf68b620','59f657b7-d109-4e37-878e-e6c98f5e0b23','c900b430-82ce-4249-99c4-314bcd580d15',-1,0,0,'end','<function command_type=\"end\"><status input_type=\"select\">Cancelled</status><message input_type=\"text\">Stop Wordpress task cancelled, confirmation \"[[CONFIRM_YES]]\" not equal to \"yes\"</message></function>','cancel task if not confirmed',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d6c6f0c1-90e6-4a19-930a-faf36d9ad804','59f657b7-d109-4e37-878e-e6c98f5e0b23','Delete Keypair',1,0,0,'aws_ec2_DeleteKeyPair','<function command_type=\"aws_ec2_DeleteKeyPair\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><KeyName input_type=\"text\">[[KEYPAIRS,[[X]]]]</KeyName><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('bf3dd083-09fd-4a32-80bb-ba44d61cc6c4','59f657b7-d109-4e37-878e-e6c98f5e0b23','Delete Security Group',1,0,0,'aws_ec2_DeleteSecurityGroup','<function command_type=\"aws_ec2_DeleteSecurityGroup\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><GroupName input_type=\"text\">[[SECURITY_GROUPS,[[X]]]]</GroupName><GroupId input_type=\"text\" /><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('2e90a606-702d-4842-b940-978348c04791','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',6,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[LOAD_BALS,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">e7858918-7fa1-4766-b411-5492544eb2cb</action><max input_type=\"text\" /></function>','spin through list of load balancers',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4bba270d-b1e2-4879-8e05-57c9e0a107ce','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',4,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[EC2_INSTANCES,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">12f370ed-63d8-473a-8c54-a8d9e91e62f6</action><max input_type=\"text\" /></function>','spin through ec2 instance list',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('68093fa5-34c4-42f1-be76-6c7e88b4b41d','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',10,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[ADDRESSES,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">e6a2c8ce-9de2-472a-92c7-3c414f14dee7</action><max input_type=\"text\" /></function>','spin through elastic ips',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('6c24270d-f039-4981-b12c-c2f01b91a8ec','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',13,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[SECURITY_GROUPS,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">e9ebee66-8547-4d93-9720-81faa053ea73</action><max input_type=\"text\" /></function>','spin through a list of security groups',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('801d5d8e-95d3-40ab-bf88-09c9ebe24dcd','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',11,0,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_ec2_security_group</object_type><result_name label=\"Result Variable\" input_type=\"text\">SECURITY_GROUPS</result_name></function>','get security groups',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('a8ecbcd9-ccf5-4ada-b97a-1916fa21de37','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">CONFIRM_YES</name><value input_type=\"text\">[[CONFIRM_YES]]</value><modifier input_type=\"select\">TO_LOWER</modifier></variable></function>','change confirmation to lower case',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('af3a196a-ce28-4e8b-ae9b-f87a97078659','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',3,0,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_ec2_instance</object_type><result_name label=\"Result Variable\" input_type=\"text\">EC2_INSTANCES</result_name></function>','get ec2 instances',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c900b430-82ce-4249-99c4-314bcd580d15','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',2,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[CONFIRM_YES]]} != {yes}</eval><action input_type=\"text\">e8d79dc5-149a-4881-b065-fdaecf68b620</action></test></tests></function>','test confirmation',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ccdbe75c-e413-4a7d-8918-88d966b06415','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',5,0,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_elb_balancer</object_type><result_name label=\"Result Variable\" input_type=\"text\">LOAD_BALS</result_name></function>','get load balancers',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d6ae3995-8f11-436e-925e-559e9719a712','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',9,0,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_ec2_address</object_type><result_name label=\"Result Variable\" input_type=\"text\">ADDRESSES</result_name></function>','get elastic ips',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e263cdea-aa56-432d-8541-e381dc32c6db','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',12,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">60</seconds></function>','sleep 60 seconds to let the ec2 instances terminate',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ff241215-19cd-4e23-8e46-66f998c69ba1','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',14,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">security_group_name</key><value input_type=\"text\" /></pair><pair><key input_type=\"text\">keypair_name</key><value input_type=\"text\"></value></pair><pair><key input_type=\"text\">elb_name</key><value input_type=\"text\"></value></pair><pair><key input_type=\"text\">master_db_name</key><value input_type=\"text\"></value></pair><pair><key input_type=\"text\">master_db_instance</key><value input_type=\"text\"></value></pair><pair><key input_type=\"text\">master_db_address</key><value input_type=\"text\"></value></pair><pair><key input_type=\"text\">master_db_password</key><value input_type=\"text\"></value></pair></function>','clear out registry',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('45fc0920-4dd3-4b39-8a3d-15e299507524','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',8,1,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">X</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[KEYPAIRS,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">348768b5-78df-49b1-ba86-7d64b9e94004</action><max input_type=\"text\" /></function>','spin through list of keypairs',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('fb07e06d-57e3-4d60-8c8f-36d6500dcada','59f657b7-d109-4e37-878e-e6c98f5e0b23','MAIN',7,1,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_ec2_keypair</object_type><result_name label=\"Result Variable\" input_type=\"text\">KEYPAIRS</result_name></function>','get keypairs',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('affbe52f-b4ff-4040-b616-44694e8db739','59f657b7-d109-4e37-878e-e6c98f5e0b23','Terminate EC2 Instance',1,0,0,'aws_ec2_TerminateInstances','<function command_type=\"aws_ec2_TerminateInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><InstanceId.n is_array=\"true\"><InstanceId input_type=\"text\">[[EC2_INSTANCES,[[X]]]]</InstanceId></InstanceId.n><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('6b8988bf-e224-4f7d-ab4a-d7fec560a2b5','59f657b7-d109-4e37-878e-e6c98f5e0b23','Terminate Load Balancer',1,0,0,'aws_elb_DeleteLoadBalancer','<function command_type=\"aws_elb_DeleteLoadBalancer\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><LoadBalancerName input_type=\"text\">[[LOAD_BALS,[[X]]]]</LoadBalancerName><result_name input_type=\"text\" /></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('a9ee0670-8dd5-4f11-882d-f1da4ac83dca','a9ee0670-8dd5-4f11-882d-f1da4ac83dca','1.000','Validate Wordpress Site','wp - 045','Checks that the Elastic Load Balancer and Wordpress websites are functioning properly.','Development',0,1,NULL,NULL,'2011-08-03 20:09:58','');
INSERT INTO `task_codeblock` VALUES ('a9ee0670-8dd5-4f11-882d-f1da4ac83dca','MAIN');
INSERT INTO `task_step` VALUES ('def51a16-ed73-4ea7-a325-6fbac38d3699','a9ee0670-8dd5-4f11-882d-f1da4ac83dca','MAIN',1,0,0,'aws_elb_DescribeLoadBalancers','<function command_type=\"aws_elb_DescribeLoadBalancers\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><LoadBalancerNames><member.N is_array=\"true\"><member input_type=\"text\">[[@elb_name]]</member></member.N></LoadBalancerNames><result_name input_type=\"text\">elb_result</result_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('f55cc254-2e06-4306-a600-f7e4b346ae8e','a9ee0670-8dd5-4f11-882d-f1da4ac83dca','MAIN',2,0,0,'http','<function command_type=\"http\"><type input_type=\"select\">GET</type><url input_type=\"text\">http://[[~elb_result.//DNSName]]/wordpress/</url></function>','',2,0,0,NULL);

INSERT INTO `task` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','c6132180-f59b-4742-a5e4-a615b70ca31e','1.000','Start Wordpress','WP - 032','Starts a multi-tier Wordpress LAMP application','Development',0,1,NULL,NULL,'2011-07-26 15:21:18','<parameters><parameter id=\"p_1ca306ba-2e82-455f-8b1a-e0ffec0d50fd\" required=\"false\" prompt=\"true\" ><name>KEYPAIR_NAME</name><desc>Optional keypair name, leave it blank and it will create one with a unique name</desc><values present_as=\"value\"><value id=\"pv_7a0bbbd6-ae1d-461a-98cf-e19dabed409b\"></value></values></parameter><parameter id=\"p_98053ae7-6d1f-49d1-9423-d7f9cf2462de\" required=\"true\" prompt=\"true\" ><name>DBINSTANCETYPE</name><desc>The EC2 instance type that will be used for the master database</desc><values present_as=\"dropdown\"><value id=\"pv_9fcf15cb-f8c4-4cb1-be16-871afe8743cd\">t1.micro</value><value id=\"pv_4d41f64a-00af-4746-b523-bf534c16cfc2\">m1.small</value><value id=\"pv_e8b1a30e-bd10-409d-b688-97e121c2dde1\">m1.large</value></values></parameter><parameter id=\"p_5eaad9c1-06df-4324-bb68-61462477f1c6\" required=\"true\" prompt=\"true\" encrypt=\"true\"><name>DBPASSWORD</name><desc>Enter the initial password for the root user of the database</desc><values present_as=\"value\"><value id=\"pv_f687d1f6-ca53-4108-aded-535315386642\"></value></values></parameter><parameter id=\"p_ade2c4f7-aa0d-45e3-a0f4-187c125c699c\" required=\"true\" prompt=\"true\" ><name>SERVERS_TO_START</name><desc>Enter the number of webservers to start</desc><values present_as=\"value\"><value id=\"pv_f04cda70-3b69-48be-8b74-2ec073914498\">1</value></values></parameter><parameter id=\"p_0c400f7e-d3cf-44d0-a1aa-781a1e0f0e00\" required=\"true\" prompt=\"true\" ><name>BLOG_TITLE</name><desc>The title of the blog</desc><values present_as=\"value\"><value id=\"pv_13fa7136-4bfb-4e0b-be54-b2012f056188\">This is my blog</value></values></parameter><parameter id=\"p_a2320995-7cb0-407f-aa63-ff0c968c1b9e\" required=\"true\" prompt=\"true\" ><name>BLOG_ADMIN</name><desc>The admin account name</desc><values present_as=\"value\"><value id=\"pv_d7b5769d-afed-4efc-8f1c-23208439bbae\">admin</value></values></parameter><parameter id=\"p_49d36f40-7de8-42b3-9a86-2a85fcefaca9\" required=\"true\" prompt=\"true\" encrypt=\"true\"><name>BLOG_ADMIN_PASSWORD</name><desc>Password for the admin account</desc><values present_as=\"value\"><value id=\"pv_85343e73-668d-40d4-afb8-9c18668cc00c\"></value></values></parameter><parameter id=\"p_36d2b502-33ea-40ee-8eb1-89b78a521fb7\" required=\"true\" prompt=\"true\" ><name>BLOG_ADMIN_EMAIL</name><desc>Email address for the blog admin account</desc><values present_as=\"value\"><value id=\"pv_781dcf18-405e-42f2-9426-9c6dd2cf3745\">admin@example.com</value></values></parameter><parameter id=\"p_e102c361-d4a5-4441-97b3-7efc2607e5b1\" required=\"true\" prompt=\"true\" ><name>DB_CONFIG</name><desc>Select master-slave for a master slave configuration, standalone for a single database instance</desc><values present_as=\"dropdown\"><value id=\"pv_2f313768-edba-4d10-8d24-976b5bd589d0\">standalone</value><value id=\"pv_932a8267-43d6-45ae-a44a-d69c2768ceb6\">master-slave</value></values></parameter><parameter id=\"p_27182167-a565-43be-befe-61fda0802787\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>SECURITY_GROUP</name><desc>Enter the security group in which to start Wordpress. This security group must have port 22 (ssh) access granted to the Cato Task Engine ip address or security group.</desc><values present_as=\"value\"><value id=\"pv_a442f951-028c-4267-9d8b-21693d4393f4\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','Get and Store Elastic IP');
INSERT INTO `task_codeblock` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN');
INSERT INTO `task_codeblock` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB');
INSERT INTO `task_codeblock` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','Standalone DB');
INSERT INTO `task_codeblock` VALUES ('c6132180-f59b-4742-a5e4-a615b70ca31e','Test Load Balancer');
INSERT INTO `task_step` VALUES ('c60de3c1-9fff-4a7b-a45c-a7358bc41c27','c6132180-f59b-4742-a5e4-a615b70ca31e','68cf0e12-122a-47c7-96f9-a538621346ab',-1,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">2aea48a9-acbe-46ae-a074-cdb45516b4f1</original_task_id><version input_type=\"text\" /></function>','create a new keypair',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('cc3d2e02-f01f-4ba8-93d4-53a509f485f9','c6132180-f59b-4742-a5e4-a615b70ca31e','68cf0e12-122a-47c7-96f9-a538621346ab',-1,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">KEYPAIR_NAME</key><value input_type=\"text\">[[KEYPAIR_NAME]]</value><mask input_type=\"checkbox\" /></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4c6d5f7d-9b28-459d-99ce-296dbeea5824','c6132180-f59b-4742-a5e4-a615b70ca31e','d4d08b39-a47e-47c4-9016-3bb681b6e700',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Standalone DB</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('787bd679-10c1-4a2e-9aac-30fc6ff06b08','c6132180-f59b-4742-a5e4-a615b70ca31e','d4d08b39-a47e-47c4-9016-3bb681b6e700',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Master Slave DB</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('46c1f44e-a11e-4d89-b58b-1c712a312080','c6132180-f59b-4742-a5e4-a615b70ca31e','Get and Store Elastic IP',1,0,0,'aws_ec2_AllocateAddress','<function command_type=\"aws_ec2_AllocateAddress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><Domain input_type=\"text\" /><result_name input_type=\"text\">address_result</result_name></function>','Get elastic IP',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4ed49a35-06fa-4e34-a140-76a313a7ded5','c6132180-f59b-4742-a5e4-a615b70ca31e','Get and Store Elastic IP',2,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">master_db_address</key><value input_type=\"text\">[[~address_result.//publicIp]]</value></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('23712468-35f7-42b1-91da-bc1c8718499c','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',11,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">150</seconds></function>','wait n seconds for everything to come up',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('439eeb20-3ec2-47a8-bfb5-f5becd5ba42e','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',5,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">66be8ab1-95a7-47d2-b495-be670e8738bb</original_task_id><version input_type=\"text\" /></function>','start up a load balancer',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('68cf0e12-122a-47c7-96f9-a538621346ab','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',4,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[KEYPAIR_NAME]]} == {}</eval><action input_type=\"text\">c60de3c1-9fff-4a7b-a45c-a7358bc41c27</action></test></tests><else input_type=\"text\">cc3d2e02-f01f-4ba8-93d4-53a509f485f9</else></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('742a0074-028c-4a44-a321-73db7c951eb0','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',9,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">1384714b-bcbb-488b-8c21-8360ec5c11e3</original_task_id><version input_type=\"text\" /></function>','start the webservers',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('81bf0472-7419-40aa-9b07-664faa4ecc8c','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',10,0,0,'aws_elb_DescribeLoadBalancers','<function command_type=\"aws_elb_DescribeLoadBalancers\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><LoadBalancerNames><member.N is_array=\"true\"><member input_type=\"text\">[[@ELB_NAME]]</member></member.N></LoadBalancerNames><result_name input_type=\"text\">LoadBalResult</result_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('a6a61774-381b-4ced-a5fb-3d0be63fcaf3','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',1,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">SECURITY_GROUP_NAME</key><value input_type=\"text\">[[SECURITY_GROUP]]</value><mask input_type=\"checkbox\" /></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('b6a68a6a-d8bb-421c-9a4f-396cfcf57b8a','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',7,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Get and Store Elastic IP</codeblock></function>','get the master db elastic ip',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d4d08b39-a47e-47c4-9016-3bb681b6e700','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',8,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_CONFIG]]} == {master-slave}</eval><action input_type=\"text\">787bd679-10c1-4a2e-9aac-30fc6ff06b08</action></test></tests><else input_type=\"text\">4c6d5f7d-9b28-459d-99ce-296dbeea5824</else></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d6ae3451-7c22-4a20-a3e3-b03400151c8f','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',12,0,0,'http','<function command_type=\"http\"><type input_type=\"select\">POST</type><url input_type=\"text\">http://[[~LoadBalResult.//DNSName]]/wordpress/wp-admin/install.php?step=2</url><pair><key input_type=\"text\">weblog_title</key><value input_type=\"text\">[[BLOG_TITLE]]</value></pair><pair><key input_type=\"text\">user_name</key><value input_type=\"text\">[[BLOG_ADMIN]]</value></pair><pair><key input_type=\"text\">admin_password</key><value input_type=\"text\">[[BLOG_ADMIN_PASSWORD]]</value></pair><pair><key input_type=\"text\">admin_password2</key><value input_type=\"text\">[[BLOG_ADMIN_PASSWORD]]</value></pair><pair><key input_type=\"text\">admin_email</key><value input_type=\"text\">[[BLOG_ADMIN_EMAIL]]</value></pair></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('fceb91e4-1eb3-4d7a-bc81-7579277d19a8','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',6,0,0,'aws_ec2_AuthorizeSecurityGroupIngress','<function command_type=\"aws_ec2_AuthorizeSecurityGroupIngress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><UserId input_type=\"text\" /><GroupId input_type=\"text\" /><GroupName input_type=\"text\">[[@SECURITY_GROUP_NAME]]</GroupName><IpPermissions.n is_array=\"true\"><IpPermissions><IpProtocol input_type=\"text\">tcp</IpProtocol><FromPort input_type=\"text\">3306</FromPort><ToPort input_type=\"text\">3306</ToPort><Groups.m is_array=\"true\"><Groups><UserId input_type=\"text\" /><GroupName input_type=\"text\">[[@SECURITY_GROUP_NAME]]</GroupName><GroupId input_type=\"text\" /></Groups></Groups.m><IpRanges.m is_array=\"true\"><IpRanges><CidrIp input_type=\"text\" /></IpRanges></IpRanges.m></IpPermissions><IpPermissions><IpProtocol input_type=\"text\">tcp</IpProtocol><FromPort input_type=\"text\">80</FromPort><ToPort input_type=\"text\">80</ToPort><Groups.m is_array=\"true\"><Groups><UserId input_type=\"text\">amazon-elb</UserId><GroupName input_type=\"text\">amazon-elb-sg</GroupName><GroupId input_type=\"text\" /></Groups></Groups.m><IpRanges.m is_array=\"true\"><IpRanges><CidrIp input_type=\"text\" /></IpRanges></IpRanges.m></IpPermissions></IpPermissions.n><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('a324e8cd-3f44-4322-8d88-fbbf31b69b46','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',2,1,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">GROUP_DESCRIPTION</name><value input_type=\"text\">Security group for the [[_ECOSYSTEM_NAME]] ecosystem</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','create a description for the security group',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d496fd99-3335-42d9-b1d3-26038cf35b8e','c6132180-f59b-4742-a5e4-a615b70ca31e','MAIN',3,1,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">c0f022a6-8fd9-4758-8538-bfae8ef3dc57</original_task_id><version input_type=\"text\" /></function>','create a security group for this ecosystem',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('0e9eaf05-038f-42f4-a7a2-b1b4af0d4936','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',5,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_ROLE</name><value input_type=\"text\">master</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('1811a742-fd8e-4e9e-bc4f-5062c00b2844','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',2,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">f7f695d1-cd39-4276-a96a-d5d9c08fb2ba</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('28e72de0-da16-474c-9a80-aa724af73f3a','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',3,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_ROLE</name><value input_type=\"text\">slave</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('2edb9e33-43d2-40c9-82db-f5bd442738cd','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',7,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_ROLE</name><value input_type=\"text\">slave</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('9267b943-c67b-4352-a750-0831d0764ecf','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',6,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">22627126-9dbe-49cc-97fd-cba516e06435</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ac7e9222-2f78-4dc9-8f0c-4f22448b48b4','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',8,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">22627126-9dbe-49cc-97fd-cba516e06435</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('dcce831c-962d-4436-8903-53243fac7150','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_ROLE</name><value input_type=\"text\">master</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('e19a7d28-219e-4fc7-8c01-8c531490f2a8','c6132180-f59b-4742-a5e4-a615b70ca31e','Master Slave DB',4,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">f7f695d1-cd39-4276-a96a-d5d9c08fb2ba</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('1fc85556-a5c5-4da8-83ec-1c9106a65ba3','c6132180-f59b-4742-a5e4-a615b70ca31e','Standalone DB',4,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">22627126-9dbe-49cc-97fd-cba516e06435</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('24e7bd06-565e-40e4-a254-1ce233a446b7','c6132180-f59b-4742-a5e4-a615b70ca31e','Standalone DB',3,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">30</seconds></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('57da614d-aa70-4353-bec4-452ff8925ef5','c6132180-f59b-4742-a5e4-a615b70ca31e','Standalone DB',2,0,0,'subtask','<function command_type=\"subtask\"><original_task_id input_type=\"text\">f7f695d1-cd39-4276-a96a-d5d9c08fb2ba</original_task_id><version input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ab9776a0-5986-4711-92c8-5b6d11c3b1a8','c6132180-f59b-4742-a5e4-a615b70ca31e','Standalone DB',1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DB_ROLE</name><value input_type=\"text\">standalone</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('06545baf-9502-46c9-8a43-82821a690cec','c6132180-f59b-4742-a5e4-a615b70ca31e','Test Load Balancer',1,0,0,'http','<function command_type=\"http\"><type input_type=\"select\">GET</type><url input_type=\"text\">http://[[~LoadBalResult.//DNSName]]/wordpress</url></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('50629f2d-54f5-40af-9478-5a2a1c01634a','c6132180-f59b-4742-a5e4-a615b70ca31e','Test Load Balancer',2,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">status</name><value input_type=\"text\">yes</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('c0f022a6-8fd9-4758-8538-bfae8ef3dc57','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','1.000','Create Basic Security Group','aws - 033','Creates a security group with no inbound rules.','Development',0,1,NULL,NULL,'2011-07-26 17:38:11','<parameters><parameter id=\"p_534fdee9-d850-4017-948d-595a8b1b3f12\" required=\"false\" prompt=\"true\"><name>GROUP_NAME</name><desc>optional Security Group name</desc><values present_as=\"value\"><value id=\"pv_e6dba089-6493-49c9-aba6-cbf9a8f7793d\"></value></values></parameter><parameter id=\"p_96e12985-cbec-40fa-a65e-ea354f60a4ec\" required=\"false\" prompt=\"true\"><name>GROUP_DESCRIPTION</name><desc>optional security group description</desc><values present_as=\"value\"><value id=\"pv_745488c9-242d-4b8c-bc1a-842fb38d60cb\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('c0f022a6-8fd9-4758-8538-bfae8ef3dc57','MAIN');
INSERT INTO `task_step` VALUES ('9723bbd5-caf0-40e9-a69a-3f57f25cfa9b','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','189714ee-1a19-4e40-902f-1c4cd4576f8b',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">GROUP_NAME</name><value input_type=\"text\">[[_UUID]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('35f09ac5-8aa0-4b43-a508-5876aca655f2','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','383ec8dc-994f-41c9-9b33-8070ed2ef9ba',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">GROUP_DESCRIPTION</name><value input_type=\"text\">Basic Security Group with no initial inbound rules</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('189714ee-1a19-4e40-902f-1c4cd4576f8b','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[GROUP_NAME]]} == {}</eval><action input_type=\"text\">9723bbd5-caf0-40e9-a69a-3f57f25cfa9b</action></test></tests></function>','If the group name was not specified as a parameter, create a unique group name using an uuid',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('383ec8dc-994f-41c9-9b33-8070ed2ef9ba','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','MAIN',2,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[GROUP_DESCRIPTION]]} == {}</eval><action input_type=\"text\">35f09ac5-8aa0-4b43-a508-5876aca655f2</action></test></tests></function>','If the group description was not specified as a parameter, use a generic description',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('3f3dd75b-a8bb-4224-899d-d0a283726436','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','MAIN',3,0,0,'aws_ec2_CreateSecurityGroup','<function command_type=\"aws_ec2_CreateSecurityGroup\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><GroupName input_type=\"text\">[[GROUP_NAME]]</GroupName><GroupDescription input_type=\"text\">[[GROUP_DESCRIPTION]]</GroupDescription><VpcId input_type=\"text\" /><result_name input_type=\"text\" /></function>','Create the new security group',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('3f7a6bf2-999b-435d-948c-9b6ac15a271f','c0f022a6-8fd9-4758-8538-bfae8ef3dc57','MAIN',4,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">SECURITY_GROUP_NAME</key><value input_type=\"text\">[[GROUP_NAME]]</value></pair></function>','',0,0,0,NULL);

INSERT INTO `task` VALUES ('2aea48a9-acbe-46ae-a074-cdb45516b4f1','2aea48a9-acbe-46ae-a074-cdb45516b4f1','1.000','Create and Store Keypair','aws - 034','Creates an EC2 keypair and stores the private key for later use','Development',0,1,NULL,NULL,'2011-07-27 14:34:40','<parameters><parameter id=\"p_aa5b68a9-e3ea-4607-91ef-e2d9c68a62e8\" required=\"false\" prompt=\"true\"><name>KEYPAIR_NAME</name><desc>Optional keypair name, will create a unique name if not entered</desc><values present_as=\"value\"><value id=\"pv_8aae9887-e5ce-40bb-92c7-e74a64652259\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('2aea48a9-acbe-46ae-a074-cdb45516b4f1','MAIN');
INSERT INTO `task_step` VALUES ('fbb2a0f4-ce3c-4db3-9152-a537db794448','2aea48a9-acbe-46ae-a074-cdb45516b4f1','7240e950-1c22-42b9-977a-0f1e77aba654',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">KEYPAIR_NAME</name><value input_type=\"text\">[[_UUID]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4d4159e8-df98-4a21-9551-e7046d8ed665','2aea48a9-acbe-46ae-a074-cdb45516b4f1','MAIN',4,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">KEYPAIR_NAME</key><value input_type=\"text\">[[KEYPAIR_NAME]]</value></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('7240e950-1c22-42b9-977a-0f1e77aba654','2aea48a9-acbe-46ae-a074-cdb45516b4f1','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[KEYPAIR_NAME]]} == {}</eval><action input_type=\"text\">fbb2a0f4-ce3c-4db3-9152-a537db794448</action></test></tests></function>','If the keypair name wasn\'t specified as a parameter, create a unique keypair name',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('95fa8884-0d50-475c-8188-c6203758b10b','2aea48a9-acbe-46ae-a074-cdb45516b4f1','MAIN',2,0,0,'aws_ec2_CreateKeyPair','<function command_type=\"aws_ec2_CreateKeyPair\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><KeyName input_type=\"text\">[[KEYPAIR_NAME]]</KeyName><result_name input_type=\"text\">create_result</result_name></function>','Create the keypair',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('be19f831-79a1-4087-9c56-968b955999c5','2aea48a9-acbe-46ae-a074-cdb45516b4f1','MAIN',3,0,0,'store_private_key','<function command_type=\"store_private_key\"><name label=\"Keypair Name\" input_type=\"text\">[[KEYPAIR_NAME]]</name><private_key label=\"Private Key\" input_type=\"text\">[[~create_result.//keyMaterial]]</private_key></function>','Store the private key for later use',0,0,0,NULL);

INSERT INTO `task` VALUES ('66be8ab1-95a7-47d2-b495-be670e8738bb','66be8ab1-95a7-47d2-b495-be670e8738bb','1.000','Create Load Balancer','aws - 037','Create an AWS Load Balancer.','Development',0,1,NULL,NULL,'2011-07-29 19:54:39','<parameters><parameter id=\"p_f6f6303b-92bc-4c03-8e27-8daa2f577b55\" required=\"false\" prompt=\"true\"><name>ELB_NAME</name><desc>Optional - enter a name for the Elastic Load Balancer. If empty a unique name will be generated.</desc><values present_as=\"value\"><value id=\"pv_7b16b240-f3bc-47f0-8ea5-7ff8383e4f52\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('66be8ab1-95a7-47d2-b495-be670e8738bb','MAIN');
INSERT INTO `task_step` VALUES ('43705d2f-ec35-4532-af12-74f120d342a8','66be8ab1-95a7-47d2-b495-be670e8738bb','185a1d84-028f-40c4-b4db-6d250ef3b17f',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">ELB_NAME</name><value input_type=\"text\">[[_UUID_V2]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('185a1d84-028f-40c4-b4db-6d250ef3b17f','66be8ab1-95a7-47d2-b495-be670e8738bb','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[ELB_NAME]]} == {}</eval><action input_type=\"text\">43705d2f-ec35-4532-af12-74f120d342a8</action></test></tests></function>','if the load balancer name is not specified, create a unique name',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('1963d2d5-7ed8-4e21-b09e-cc0106d891db','66be8ab1-95a7-47d2-b495-be670e8738bb','MAIN',3,0,0,'aws_elb_ConfigureHealthCheck','<function command_type=\"aws_elb_ConfigureHealthCheck\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><HealthCheck><HealthyThreshold input_type=\"text\">2</HealthyThreshold><Interval input_type=\"text\">30</Interval><Target input_type=\"text\">http:80/index.html</Target><Timeout input_type=\"text\">3</Timeout><UnhealthyThreshold input_type=\"text\">2</UnhealthyThreshold></HealthCheck><LoadBalancerName input_type=\"text\">[[ELB_NAME]]</LoadBalancerName><result_name input_type=\"text\" /></function>','standard http ping',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('938bb4d1-669c-47fe-aaa1-16347054f382','66be8ab1-95a7-47d2-b495-be670e8738bb','MAIN',2,0,0,'aws_elb_CreateLoadBalancer','<function command_type=\"aws_elb_CreateLoadBalancer\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><AvailabilityZones><member.N is_array=\"true\"><member input_type=\"text\">us-east-1a</member><member input_type=\"text\">us-east-1b</member><member input_type=\"text\">us-east-1c</member></member.N></AvailabilityZones><Listeners><member.N is_array=\"true\"><member><InstancePort input_type=\"text\">80</InstancePort><LoadBalancerPort input_type=\"text\">80</LoadBalancerPort><Protocol input_type=\"text\">TCP</Protocol><SSLCertificateId input_type=\"text\" /></member></member.N></Listeners><LoadBalancerName input_type=\"text\">[[ELB_NAME]]</LoadBalancerName><result_name input_type=\"text\" /></function>','create a three zone elb for port 80',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('98faa93a-1fce-40c2-a422-e9ad0119cad8','66be8ab1-95a7-47d2-b495-be670e8738bb','MAIN',4,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">ELB_NAME</key><value input_type=\"text\">[[ELB_NAME]]</value></pair></function>','store the elb name',0,0,0,NULL);

INSERT INTO `task` VALUES ('f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','1.000','Start Ubuntu Instance and Install MySQL and Wordpress','wp - 012','Starts a 64bit Ubuntu Instance and installs MySQL, sets the root MySQL password and restarts the server to accept connections.','Development',0,1,NULL,NULL,'2011-06-16 17:04:58','<parameters><parameter id=\"p_b9c7a36f-28aa-492c-b154-79baf7f1f05d\" required=\"true\" prompt=\"true\"><name>DBInstanceType</name><desc></desc><values present_as=\"dropdown\"><value id=\"pv_ce524608-46f9-4f5e-8fc9-4ba9b5620939\">t1.micro</value><value id=\"pv_eb9013e0-dabc-4dfb-89d4-490383230bc0\">m1.small</value><value id=\"pv_9116165a-df45-4dbd-93cf-0316fc2304f0\">m1.large</value><value id=\"pv_74c8ffef-100a-4906-84d9-b7af5e16fb4b\">m1.xlarge</value><value id=\"pv_747cecff-b4f8-4571-8a47-becccb66693e\">c1.medium</value><value id=\"pv_d6d418b8-a69d-4a0e-b969-5c02a4374b3c\">c1.xlarge</value><value id=\"pv_6536274b-1d6b-48f7-8db2-734db562e7b4\">m2.xlarge</value><value id=\"pv_1aea66ab-6239-447f-a5eb-c2395d4ad9b0\">m2.2xlarge</value><value id=\"pv_22e42ee0-d8d9-48ae-bb34-84e721940d0b\">m2.4xlarge</value><value id=\"pv_c911973d-333d-4c70-b0ea-8607ef333541\">cc1.4xlarge</value><value id=\"pv_51bc18ca-1280-49a2-8225-f6ad15e7d0d7\">cg1.4xlarge</value></values></parameter><parameter id=\"p_0f7ffd37-a36f-4205-82ae-5cf3fe419355\" required=\"true\" prompt=\"true\" encrypt=\"true\"><name>DBPassword</name><desc>Enter the password for the database user.</desc><values present_as=\"value\"><value id=\"pv_f577cf59-8add-4e4f-acf4-54e3fefebf7c\"></value></values></parameter><parameter id=\"p_c57e4c95-e820-48c4-9a3a-640962c4fd5d\" required=\"true\" prompt=\"true\"><name>DB_ROLE</name><desc>Select master, slave or standalone</desc><values present_as=\"dropdown\"><value id=\"pv_5cc94280-d815-4420-b79d-d688154385a2\">standalone</value><value id=\"pv_515291bc-ab69-4137-a08f-82a902bf5c49\">master</value><value id=\"pv_f54c281d-44d9-4b13-9853-4571ac0e4a94\">slave</value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','Associate Elastic IP with DB');
INSERT INTO `task_codeblock` VALUES ('f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN');
INSERT INTO `task_step` VALUES ('9b4aa054-12e8-49f6-b3f9-1abe25037654','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','0c0271af-bf7b-4e42-980e-d36c2e854281',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">ADDITIONAL_CONFIG</name><value input_type=\"text\">sudo sed -i \'/\\[mysqld\\]/a \\log-bin = /var/lib/mysql/mysql-bin.log\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\binlog-do-db = wordpress\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\server-id = 1\' /etc/mysql/my.cnf</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','additional config for master',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('df065f7c-de38-4a02-9778-0b31c53ce5a7','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','0c0271af-bf7b-4e42-980e-d36c2e854281',-1,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">ADDITIONAL_CONFIG</name><value input_type=\"text\">sudo sed -i \'/\\[mysqld\\]/a \\master-host = [[@master_db_address]]\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\master-user = wordpress_repl\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\master-password = [[@master_db_password]]\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\master-port = 3306\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\master-connect-retry = 60\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\replicate-do-db = wordpress\' /etc/mysql/my.cnf\r\nsudo sed -i \'/\\[mysqld\\]/a \\server-id = 2\' /etc/mysql/my.cnf</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','additional config for slave',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4fb6ef7e-9a9d-499e-a267-e26663d10e8a','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','0dcaa379-b349-43ac-9540-7cd08ec21785',-1,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">slave_db_instance</key><value input_type=\"text\">[[DBHost]]</value></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c6af9561-e035-4c95-95aa-6566fc947ce7','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','0dcaa379-b349-43ac-9540-7cd08ec21785',-1,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">master_db_instance</key><value input_type=\"text\">[[DBHost]]</value></pair><pair><key input_type=\"text\">master_db_password</key><value input_type=\"text\">[[DBPassword]]</value></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('5bd32466-d148-4d39-b7ac-326038b75b1a','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','3ead1fb2-02bc-48ce-9b40-6000fc99e27b',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Associate Elastic IP with DB</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('34e73791-3422-4b5f-8641-5424a7d4e8ac','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','Associate Elastic IP with DB',2,0,0,'parse_text','<function command_type=\"parse_text\"><text input_type=\"text\">[[@master_db_address]]</text></function>','',2,0,46,'<variables><variable><name>ip1</name><type>delimited</type><position>1</position></variable><variable><name>ip2</name><type>delimited</type><position>2</position></variable><variable><name>ip3</name><type>delimited</type><position>3</position></variable><variable><name>ip4</name><type>delimited</type><position>4</position></variable></variables>');
INSERT INTO `task_step` VALUES ('622cfb59-475a-4459-ad86-08800339244c','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','Associate Elastic IP with DB',4,0,0,'dataset','<function command_type=\"dataset\"><pair><key input_type=\"text\">master_db_address</key><value input_type=\"text\">ec2-[[ip1]]-[[ip2]]-[[ip3]]-[[ip4]].compute-1.amazonaws.com</value></pair></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('94137e1e-0e41-4a09-a3c9-4792a8f771d6','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','Associate Elastic IP with DB',3,0,0,'aws_ec2_AssociateAddress','<function command_type=\"aws_ec2_AssociateAddress\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><PublicIp input_type=\"text\">[[@master_db_address]]</PublicIp><InstanceId input_type=\"text\">[[DBHost]]</InstanceId><AllocationId input_type=\"text\" /><result_name input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c03605c0-ac68-4466-bea2-baa4a619912e','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','Associate Elastic IP with DB',1,0,0,'sleep','<function command_type=\"sleep\"><seconds input_type=\"text\">30</seconds></function>','sleep 30 to let server start',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('0c0271af-bf7b-4e42-980e-d36c2e854281','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',1,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_ROLE]]} == {master}</eval><action input_type=\"text\">9b4aa054-12e8-49f6-b3f9-1abe25037654</action></test><test><eval input_type=\"text\">{[[DB_ROLE]]} == {slave}</eval><action input_type=\"text\">df065f7c-de38-4a02-9778-0b31c53ce5a7</action></test></tests></function>','add additional config depending on whether master or slave database',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('0dcaa379-b349-43ac-9540-7cd08ec21785','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',6,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_ROLE]]} == {master} || {[[DB_ROLE]]} == {standalone}</eval><action input_type=\"text\">c6af9561-e035-4c95-95aa-6566fc947ce7</action></test><test><eval input_type=\"text\">{[[DB_ROLE]]} == {slave}</eval><action input_type=\"text\">4fb6ef7e-9a9d-499e-a267-e26663d10e8a</action></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('3ead1fb2-02bc-48ce-9b40-6000fc99e27b','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',5,0,0,'if','<function command_type=\"if\"><tests><test><eval input_type=\"text\">{[[DB_ROLE]]} == {master} || {[[DB_ROLE]]} == {standalone}</eval><action input_type=\"text\">5bd32466-d148-4d39-b7ac-326038b75b1a</action></test></tests></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('5fe8b26d-5d77-4020-8bf6-c74ce9163007','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',3,0,0,'aws_ec2_RunInstances','<function command_type=\"aws_ec2_RunInstances\"><aws_region input_type=\"text\" label=\"AWS Region\" hr_after=\"true\" /><ImageId input_type=\"text\">ami-1aad5273</ImageId><MinCount input_type=\"text\">1</MinCount><MaxCount input_type=\"text\">1</MaxCount><KeyName input_type=\"text\">[[@KEYPAIR_NAME]]</KeyName><SecurityGroupId.n is_array=\"true\"><SecurityGroupId input_type=\"text\" /></SecurityGroupId.n><SecurityGroup.n is_array=\"true\"><SecurityGroup input_type=\"text\">[[@SECURITY_GROUP_NAME]]</SecurityGroup></SecurityGroup.n><UserData input_type=\"text\">[[userdata]]</UserData><AddressingType input_type=\"text\" /><InstanceType input_type=\"text\">[[DBInstanceType]]</InstanceType><Placement><AvailabilityZone input_type=\"text\">us-east-1a</AvailabilityZone><GroupName input_type=\"text\" /><Tenancy input_type=\"text\" /></Placement><KernelId input_type=\"text\" /><RamdiskId input_type=\"text\" /><BlockDeviceMapping.n is_array=\"true\"><BlockDeviceMapping><DeviceName input_type=\"text\">/dev/sdh</DeviceName><NoDevice input_type=\"text\" /><VirtualName input_type=\"text\" /><Ebs><SnapshotId input_type=\"text\" /><VolumeSize input_type=\"text\">10</VolumeSize><DeleteOnTermination input_type=\"text\" /></Ebs></BlockDeviceMapping></BlockDeviceMapping.n><Monitoring><Enabled input_type=\"text\" /></Monitoring><SubnetId input_type=\"text\" /><DisableApiTermination input_type=\"text\" /><InstanceInitiatedShutdownBehavior input_type=\"text\" /><PrivateIpAddress input_type=\"text\" /><ClientToken input_type=\"text\" /><instance_role input_type=\"text\" label=\"Server Role\">database</instance_role><result_name input_type=\"text\">RunInstancesResult</result_name></function>','start db server',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('b02735e5-95a7-4ebf-b8a6-cc29580e123a','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',4,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">DBHost</name><value input_type=\"text\">[[~RunInstancesResult.//instancesSet/item/instanceId]]</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','Get the newly launched instance id',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('d7e958e9-3c76-434c-b7ed-d63475878070','f7f695d1-cd39-4276-a96a-d5d9c08fb2ba','MAIN',2,0,0,'set_variable','<function command_type=\"set_variable\"><variable><name input_type=\"text\">userdata</name><value input_type=\"text\">#!/bin/bash -ex\r\nexport DEBIAN_FRONTEND=noninteractive\r\necho \"US/Eastern\" | sudo tee /etc/timezone\r\nsudo dpkg-reconfigure --frontend noninteractive tzdata\r\necho \"mysql-server mysql-server/root_password select [[DBPassword]]\" | sudo debconf-set-selections;echo \"mysql-server mysql-server/root_password_again select [[DBPassword]]\" | sudo debconf-set-selections\r\nsudo apt-get -y -q=2 install mysql-server xfsprogs s3cmd\r\nsudo sed -i \"s|^bind-address.*$|#\\\\0|\" /etc/mysql/my.cnf\r\nIP_ADDRESS=`/sbin/ifconfig eth0 | grep \'inet addr:\' | cut -d: -f2 | awk \'{ print $1}\'`\r\nsudo sed -i \'/\\[mysqld\\]/a \\bind-address = \'\"$IP_ADDRESS\"\'\' /etc/mysql/my.cnf\r\necho \"US/Eastern\" | sudo tee /etc/timezone\r\nsudo dpkg-reconfigure --frontend noninteractive tzdata\r\n[[ADDITIONAL_CONFIG]]\r\nsudo service mysql stop\r\ngrep -q xfs /proc/filesystems || sudo modprobe xfs\r\nsudo mkfs.xfs /dev/xvdh\r\necho \"/dev/xvdh /vol xfs noatime 0 0\" | sudo tee -a /etc/fstab\r\nsudo mkdir -m 000 /vol\r\nsudo mount /vol\r\nsudo mkdir /vol/etc /vol/lib /vol/log \r\nsudo mv /etc/mysql     /vol/etc/ \r\nsudo mv /var/lib/mysql /vol/lib/\r\nsudo mv /var/log/mysql /vol/log/\r\nsudo mkdir /etc/mysql\r\nsudo mkdir /var/lib/mysql\r\nsudo mkdir /var/log/mysql\r\necho \"/vol/etc/mysql /etc/mysql     none bind\" | sudo tee -a /etc/fstab\r\nsudo mount /etc/mysql\r\necho \"/vol/lib/mysql /var/lib/mysql none bind\" | sudo tee -a /etc/fstab\r\nsudo mount /var/lib/mysql\r\necho \"/vol/log/mysql /var/log/mysql none bind\" | sudo tee -a /etc/fstab\r\nsudo mount /var/log/mysql\r\nsleep 10 \r\nsudo service mysql start</value><modifier input_type=\"select\">DEFAULT</modifier></variable></function>','create userdata startup script',0,0,0,NULL);

INSERT INTO `task` VALUES ('7c680ef3-dbf5-4c4c-90f2-c96032a46386','7c680ef3-dbf5-4c4c-90f2-c96032a46386','1.000','Archive Apache Logs','apache - 001','Will copy the current apache log from default /var/logs/apache to s3 using s3cmd. ','Development',0,1,NULL,NULL,'2011-06-17 14:54:14','<parameters><parameter id=\"p_f6bdedd7-81bc-48c4-ae85-b281a5b3e03b\" required=\"true\" prompt=\"true\" encrypt=\"false\"><name>bucket_name</name><desc>Enter the bucket name to place logfiles</desc><values present_as=\"value\"><value id=\"pv_d5c21252-0820-46c4-bbd2-f0fda77e83e0\"></value></values></parameter></parameters>');
INSERT INTO `task_codeblock` VALUES ('7c680ef3-dbf5-4c4c-90f2-c96032a46386','Connect and Put Log');
INSERT INTO `task_codeblock` VALUES ('7c680ef3-dbf5-4c4c-90f2-c96032a46386','MAIN');
INSERT INTO `task_step` VALUES ('4e952787-94d5-4923-8a43-d16d6c034743','7c680ef3-dbf5-4c4c-90f2-c96032a46386','40db7cd0-6767-46bf-85f3-7c5009d67023',-1,0,0,'codeblock','<function command_type=\"codeblock\"><codeblock input_type=\"text\">Connect and Put Log</codeblock></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('4eaccfdd-155e-463b-b34e-a21f6fee1997','7c680ef3-dbf5-4c4c-90f2-c96032a46386','Connect and Put Log',3,0,0,'cmd_line','<function command_type=\"cmd_line\"><conn_name input_type=\"text\">CONN1</conn_name><command input_type=\"text\">s3cmd --no-progress put /var/log/apache2/access.log s3://[[bucket_name]]/[[_DATE(%Y_%m_%d_%H_%M_%S)]]_access.log</command><timeout input_type=\"text\" /><positive_response input_type=\"text\" /><negative_response input_type=\"text\" /></function>','',2,0,0,NULL);
INSERT INTO `task_step` VALUES ('8ba443e4-2600-499b-8f1e-ea0951163b81','7c680ef3-dbf5-4c4c-90f2-c96032a46386','Connect and Put Log',2,0,0,'new_connection','<function command_type=\"new_connection\"><conn_type input_type=\"select\">ssh - ec2</conn_type><asset input_type=\"text\">ubuntu@[[result,[[Z]]]]</asset><conn_name input_type=\"text\">CONN1</conn_name></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('ae3ddf11-4cfc-4baf-a5de-92f15e31c860','7c680ef3-dbf5-4c4c-90f2-c96032a46386','Connect and Put Log',1,1,0,'log_msg','<function command_type=\"log_msg\"><message input_type=\"text\">[[_DATE(%Y_%m_%d_%H_%M_%S)]]</message></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('40db7cd0-6767-46bf-85f3-7c5009d67023','7c680ef3-dbf5-4c4c-90f2-c96032a46386','MAIN',2,0,0,'loop','<function command_type=\"loop\"><start input_type=\"text\">1</start><counter input_type=\"text\">Z</counter><test input_type=\"select\">&lt;=</test><compare_to input_type=\"text\">[[result,*]]</compare_to><increment input_type=\"text\">1</increment><action input_type=\"text\">4e952787-94d5-4923-8a43-d16d6c034743</action><max input_type=\"text\" /></function>','',0,0,0,NULL);
INSERT INTO `task_step` VALUES ('c90d206b-6074-483e-8c0f-b30da9e803ec','7c680ef3-dbf5-4c4c-90f2-c96032a46386','MAIN',1,0,0,'get_ecosystem_objects','<function command_type=\"get_ecosystem_objects\"><object_type input_type=\"select\" label=\"Object Type\">aws_ec2_instance</object_type><result_name label=\"Result Variable\" input_type=\"text\">result</result_name></function>','',0,0,0,NULL);


INSERT INTO `ecotemplate` (ecotemplate_id, ecotemplate_name, ecotemplate_desc) VALUES ('0abb815b-db7c-4892-8257-552f1cec8929','Wordpress Blog','Wordpress template, separate web and database server setup with optional master - slave MySQL database');
INSERT INTO `ecotemplate_action` VALUES ('4dd8b6ef-dd73-4ce4-9c84-635cb1741e5a','0abb815b-db7c-4892-8257-552f1cec8929','Add Web Server(s)','Use this action to add web server capacity to the Wordpress ecosystem. It will prompt for the number of webservers to add (default = 1).','Web Server Maintenance','1384714b-bcbb-488b-8c21-8360ec5c11e3',NULL,NULL,'92_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('9a8819c5-b6f2-46dd-b431-81c074bb15c4','0abb815b-db7c-4892-8257-552f1cec8929','Backup Master DB','Use this to backup the master database to S3. Requires a S3 bucket name.','DB Maintenance','8e3d9227-f5f5-410d-b131-bdbb2a4bbe63',NULL,'<parameters><parameter id=\"p_cfdfe1d1-c0e7-47f6-b3f2-0c6c24b58f21\" required=\"true\"><name>BUCKET_NAME</name><values present_as=\"value\"><value>demo.backups.cloudsidekick.com</value></values></parameter></parameters>','30_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('8d9758c6-6878-4c11-8aa5-5792ad57e08e','0abb815b-db7c-4892-8257-552f1cec8929','Remove Web Server(s)','Use this action to remove web server capacity from the Wordpress ecosystem. It will prompt for the number of webservers to remove (default = 1). At least one webserver will be left enabled regardless of the number of servers to remove entered.','Web Server Maintenance','3079444b-c680-491d-8019-2023e51b6394',NULL,'<parameters><parameter id=\"p_f00122f0-e41a-4d1f-9aba-8658ae5e73a7\" required=\"true\"><name>SERVERS_TO_REMOVE</name><values present_as=\"value\"><value>1</value></values></parameter></parameters>','90_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('0547a649-5cd1-4575-b9ce-a4f72476ceb4','0abb815b-db7c-4892-8257-552f1cec8929','Restore Database from Backup',NULL,'DB Maintenance','946e0cbf-04da-49b8-b445-69e08bc58748',NULL,NULL,'29_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('b1376a33-543c-466f-a5d3-c96795a840a8','0abb815b-db7c-4892-8257-552f1cec8929','Rotate Apache Logs',NULL,'Web Server Maintenance','7c680ef3-dbf5-4c4c-90f2-c96032a46386',NULL,NULL,'106_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('e1ee191d-2da6-4c62-aa23-6f3a23aa1997','0abb815b-db7c-4892-8257-552f1cec8929','Start Wordpress','This action starts a Wordpress ecosystem. ','Startup','c6132180-f59b-4742-a5e4-a615b70ca31e',NULL,NULL,'46_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('67a00423-88a0-492a-b4f2-7f32a09e3c43','0abb815b-db7c-4892-8257-552f1cec8929','Stop Wordpress','This action stops a Wordpress  ecosystem.','Shutdown','59f657b7-d109-4e37-878e-e6c98f5e0b23',NULL,NULL,'45_48x48.png');
INSERT INTO `ecotemplate_action` VALUES ('89259631-f537-4947-824d-d5a1c105ac1a','0abb815b-db7c-4892-8257-552f1cec8929','Take DB Snapshot','Takes a snapshot of the master','DB Maintenance','7aaf6926-b5b8-41f3-b939-aac32322639f',NULL,NULL,NULL);
INSERT INTO `ecotemplate_action` VALUES ('ef7e40b9-7d98-4378-8850-03b662896dee','0abb815b-db7c-4892-8257-552f1cec8929','Validate Site',NULL,'Monitors','a9ee0670-8dd5-4f11-882d-f1da4ac83dca',NULL,NULL,'141_48x48.png');

